{% extends "base.html" %}
{% block extra_head %}
<style>
  /* Reuse quick-links/partner styles from News */
  .quick-links-card .ql-item { display:flex; align-items:center; justify-content:space-between; padding:.6rem .8rem; border-radius:12px; transition:transform .2s ease, background .2s ease, box-shadow .2s ease; }
  .quick-links-card .ql-item:hover { background: rgba(104,155,138,.08); transform: translateX(4px); box-shadow: 0 6px 16px rgba(0,0,0,.06); }
  .quick-links-card .ql-item .ql-left { display:flex; align-items:center; gap:.5rem; }
  .quick-links-card .ql-item i { color: #689b8a !important; }
  .quick-links-card .ql-arrow { color:#689b8a; opacity:.7; }
  .quick-links-card .ql-item:hover .ql-arrow { opacity:1; }

  .partner-cta { background: linear-gradient(135deg, #689b8a, #5a8e7d); border-radius:16px; }
  .partner-cta .card-title, .partner-cta .card-text { color:#ffffff !important; }
  .partner-cta .cta-btn { background:#f9cb99; border-color:#f9cb99; color:#103d24; font-weight:700; }
  .partner-cta .cta-btn:hover { box-shadow: 0 10px 24px rgba(249,203,153,.4); transform: translateY(-3px); }
</style>
{% endblock %}

{% block title %}
{% if current_language == 'ar' and article.seo_title_ar %}
{{ article.seo_title_ar }}
{% elif article.seo_title_en %}
{{ article.seo_title_en }}
{% else %}
{{ article.get_title(current_language) }} - {{ _('News') }} - {{ SITE_NAME }}
{% endif %}
{% endblock %}

{% block meta_description %}
{% if current_language == 'ar' and article.seo_description_ar %}
{{ article.seo_description_ar }}
{% elif article.seo_description_en %}
{{ article.seo_description_en }}
{% else %}
{{ article.get_excerpt(current_language) | truncate(160) }}
{% endif %}
{% endblock %}

{% block og_title %}{{ article.get_title(current_language) }}{% endblock %}
{% block og_description %}{{ article.get_excerpt(current_language) | truncate(160) }}{% endblock %}
{% block og_image %}
{% if article.cover_image %}
{{ url_for('main.uploaded_file', filename='news/' + article.cover_image, _external=True) }}
{% else %}
{{ super() }}
{% endif %}
{% endblock %}

{% block content %}
<!-- Article Hero (unified with site identity) -->
<section class="py-5 products-hero position-relative overflow-hidden" style="background: linear-gradient(160deg, #689b8a 0%, #5a8e7d 35%, #3f6f61 100%);">
  <style>
    .products-hero { min-height: 360px; }
    .products-hero .section-heading, .products-hero .lead { color:#fff !important; }
    .products-hero .breadcrumb, .products-hero .breadcrumb * { color:rgba(255,255,255,0.85) !important; }
    .products-hero .section-badge { background: var(--secondary-gradient) !important; color: var(--dark-color) !important; }
    .products-hero .pattern-dots { color: rgba(255,255,255,.15); }
  </style>
  <!-- Background Elements -->
  <div class="position-absolute top-0 start-0 w-100 h-100" aria-hidden="true">
    <div class="pattern-dots position-absolute" style="top: -40px; left: -40px; font-size: 140px; opacity: .08; color:#ffffff;">•••••<br>•••••<br>•••••</div>
    <div class="pattern-dots position-absolute" style="bottom: -30px; right: -30px; font-size: 120px; opacity: .08; color:#ffffff;">•••••<br>•••••<br>•••••</div>
  </div>

  <div class="container position-relative">
    <div class="row align-items-center g-4">
      <div class="col-lg-8" data-aos="fade-right">
        <nav aria-label="breadcrumb" class="mb-2">
          <ol class="breadcrumb">
            <li class="breadcrumb-item"><a href="{{ url_for('main.index') }}">{{ _('Home') }}</a></li>
            <li class="breadcrumb-item"><a href="{{ url_for('main.news') }}">{{ _('News') }}</a></li>
            <li class="breadcrumb-item active text-white">{{ article.get_title(current_language) | truncate(48) }}</li>
          </ol>
        </nav>

        <div class="mb-3">
          <div class="section-badge badge bg-gradient-primary text-white px-4 py-2 rounded-pill mb-3 fs-6 fw-semibold">
            <i class="fas fa-newspaper me-2"></i>{% if is_rtl %}الأخبار{% else %}{{ _('News') }}{% endif %}
          </div>
          <h1 class="section-heading {{ 'arabic-heading' if is_rtl else 'english-heading' }} mb-3">{{ article.get_title(current_language) }}</h1>
          {% if article.get_excerpt(current_language) %}
          <p class="lead {{ 'arabic-text' if is_rtl else 'english-text' }} text-white-75">{{ article.get_excerpt(current_language) }}</p>
          {% endif %}
        </div>

        <div class="d-flex flex-wrap align-items-center gap-2 text-white-75">
          {% set rt = article.get_reading_time(current_language) %}
          <small><i class="fas fa-calendar-alt me-1"></i>{% if is_rtl %}{{ article.publish_at.strftime('%d %B %Y') }}{% else %}{{ article.publish_at.strftime('%B %d, %Y') }}{% endif %}</small>
          <span class="opacity-50">•</span>
          <small><i class="fas fa-clock me-1"></i>{% if is_rtl %}وقت القراءة: {{ rt }} {{ 'دقيقة' if rt == 1 else 'دقائق' }}{% else %}{{ _('Reading time') }}: {{ rt }} {{ _('minutes') }}{% endif %}</small>
          {% if article.featured %}
          <span class="badge bg-warning text-dark ms-2">{{ _('Featured') }}</span>
          {% endif %}
        </div>
      </div>
      <div class="col-lg-4 text-lg-end" data-aos="fade-left">
        <a href="{{ url_for('main.contact') }}" class="btn btn-primary btn-lg px-4 py-3 hover-lift" style="border-radius: 12px;">
          <i class="fas fa-envelope me-2"></i>{% if is_rtl %}تواصل معنا{% else %}{{ _('Contact Us') }}{% endif %}
        </a>
      </div>
    </div>
  </div>
</section>

<!-- Article Content (two-column layout with sticky sidebar) -->
<section class="py-5">
  <div class="container">
    <div class="row g-4">
      <!-- Main Content -->
      <div class="col-lg-8">
        <!-- Cover Image -->
        {% if article.cover_image %}
        <div class="mb-4">
          <img src="{{ url_for('main.uploaded_file', filename='news/' + article.cover_image) }}" alt="{{ article.get_title(current_language) }}" class="img-fluid rounded-3 shadow-sm" style="max-height: 460px; object-fit: cover; width: 100%;">
        </div>
        {% endif %}

        <!-- Article Body -->
        <article class="article-content card border-0 shadow-lg p-4">
          {% if article.get_content(current_language) %}
            {{ article.get_content(current_language) | safe }}
          {% else %}
            <p>{{ article.get_excerpt() }}</p>
            <p>This is a sample news article for Emdad Global. In a real implementation, this would contain the full article content from the database.</p>
            <h3>Key Highlights</h3>
            <ul>
              <li>Expansion into new international markets</li>
              <li>Enhanced quality control processes</li>
              <li>Sustainable agricultural practices</li>
              <li>Strengthened partnerships with global distributors</li>
            </ul>
            <blockquote class="blockquote border-start border-4 ps-4 my-4" style="border-color:#f9cb99 !important;">
              <p class="mb-0">"Quality is not just our goal—it's our foundation. Every product that bears the Emdad Global name represents our commitment to excellence."</p>
              <footer class="blockquote-footer mt-2">Emdad Global Management Team</footer>
            </blockquote>
            <p>For more information about our products and services, please don't hesitate to contact our team. We're always ready to discuss how we can meet your agricultural sourcing needs.</p>
          {% endif %}
        </article>

        <!-- Tags -->
        {% if article.get_tags_list() %}
        <div class="mt-4">
          <h6 class="mb-2">{% if is_rtl %}الوسوم:{% else %}{{ _('Tags:') }}{% endif %}</h6>
          <div class="d-flex flex-wrap gap-2">
            {% for tag in article.get_tags_list() %}
            <span class="badge bg-light text-dark">#{{ tag }}</span>
            {% endfor %}
          </div>
        </div>
        {% endif %}

        <style>
          /* Share buttons styling to match site identity */
          .share-btn { border-width:2px; }
          .share-btn[data-platform="facebook"] { border-color:#3b5998; color:#3b5998; }
          .share-btn[data-platform="facebook"]:hover { background:#3b5998; color:#fff; }
          .share-btn[data-platform="twitter"] { border-color:#1da1f2; color:#1da1f2; }
          .share-btn[data-platform="twitter"]:hover { background:#1da1f2; color:#fff; }
          .share-btn[data-platform="whatsapp"] { border-color:#25D366; color:#25D366; }
          .share-btn[data-platform="whatsapp"]:hover { background:#25D366; color:#103d24; }
          .share-btn[data-platform="copy"] { border-color:#689b8a; color:#689b8a; }
          .share-btn[data-platform="copy"]:hover { background:#689b8a; color:#103d24; }
        </style>
        <!-- Share Again -->
        <div class="mt-4">
          <h6 class="mb-2">{% if is_rtl %}شارك هذا المقال:{% else %}{{ _('Share this article:') }}{% endif %}</h6>
          <!-- SVG icon versions with green outline + peach hover -->
          <div class="d-flex gap-2 flex-wrap">
            <button class="btn btn-outline-primary btn-sm hover-lift share-btn" data-platform="facebook" aria-label="Facebook">
              <span class="me-1" aria-hidden="true" style="line-height:0; color:#3b5998;">
                <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor"><path d="M22 12a10 10 0 10-11.6 9.9v-7h-2.4V12h2.4V9.7c0-2.4 1.4-3.7 3.6-3.7 1 0 2 .2 2 .2v2.3h-1.1c-1.1 0-1.5.7-1.5 1.5V12h2.6l-.4 2.9h-2.2v7A10 10 0 0022 12z"/></svg>
              </span>Facebook
            </button>
            <button class="btn btn-outline-primary btn-sm hover-lift share-btn" data-platform="twitter" aria-label="Twitter" style="border-color:#1da1f2; color:#1da1f2;">
              <span class="me-1" aria-hidden="true" style="line-height:0; color:#1da1f2;">
                <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor"><path d="M22 5.9c-.7.3-1.5.6-2.3.7.8-.5 1.4-1.2 1.7-2.1-.8.5-1.7.9-2.6 1.1A4.2 4.2 0 0015.3 4c-2.4 0-4.3 1.9-4.3 4.3 0 .3 0 .6.1.9-3.6-.2-6.9-1.9-9-4.5-.4.6-.6 1.3-.6 2 0 1.5.8 2.8 2 3.6-.7 0-1.3-.2-1.9-.5 0 2.1 1.5 3.8 3.5 4.2-.4.1-.8.2-1.3.2-.3 0-.6 0-.9-.1.6 1.9 2.4 3.2 4.5 3.2A8.5 8.5 0 012 19.5 12 12 0 008.6 21c7.2 0 11.2-6 11.2-11.2v-.5c.8-.6 1.5-1.3 2.1-2.1z"/></svg>
              </span>Twitter
            </button>
            <button class="btn btn-outline-primary btn-sm hover-lift share-btn" data-platform="whatsapp" aria-label="WhatsApp" style="border-color:#25D366; color:#25D366;">
              <span class="me-1" aria-hidden="true" style="line-height:0; color:#25D366;">
                <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor"><path d="M20.5 3.5A10 10 0 003.7 18.3L3 21l2.8-.7A10 10 0 1020.5 3.5zm-8.4 16a8 8 0 01-4.1-1.1l-.3-.2-2.4.6.6-2.3-.2-.3a8 8 0 117.8 3.3zm4.4-5.3c-.2-.1-1.3-.6-1.4-.6-.2-.1-.3-.1-.5.1l-.4.5c-.1.1-.2.1-.4 0-.2-.1-.8-.3-1.5-1-.6-.5-1-1.2-1.1-1.3-.1-.2 0-.3.1-.4l.3-.3c.1-.1.1-.2.1-.3l-.5-1.2c-.1-.3-.2-.3-.4-.3h-.3c-.1 0-.3.1-.5.3-.2.2-.7.7-.7 1.7s.7 1.9.8 2.1c.1.2 1.4 2.2 3.4 3 .5.2.8.3 1.1.4.5.2 1 .2 1.3.1.4-.1 1.3-.5 1.5-1 .2-.5.2-.9.2-1 0-.1-.1-.2-.3-.3z"/></svg>
              </span>WhatsApp
            </button>
            <button class="btn btn-outline-primary btn-sm hover-lift share-btn" data-platform="copy" aria-label="Copy Link" style="border-color:#689b8a; color:#689b8a;">
              <span class="me-1" aria-hidden="true" style="line-height:0; color:#689b8a;">
                <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor"><path d="M16 1H6a2 2 0 00-2 2v11h2V3h10V1zm3 4H10a2 2 0 00-2 2v11a2 2 0 002 2h9a2 2 0 002-2V7a2 2 0 00-2-2zm0 13H10V7h9v11z"/></svg>
              </span>{% if is_rtl %}نسخ الرابط{% else %}Copy Link{% endif %}
            </button>
          </div>

        </div>
      </div>

      <!-- Sidebar -->
      <div class="col-lg-4">
        <div class="position-sticky" style="top: 90px;">
          <!-- Article Info -->
          <div class="card border-0 shadow-lg mb-4">
            <div class="card-body">
              <div class="d-flex align-items-center mb-3">
                <span class="badge bg-gradient-secondary text-dark fw-semibold me-2"><i class="fas fa-tag me-1"></i>{{ _('News') }}</span>
                {% if article.featured %}<span class="badge bg-warning text-dark fw-semibold"><i class="fas fa-star me-1"></i>{{ _('Featured') }}</span>{% endif %}
              </div>
              <div class="d-flex align-items-center text-muted mb-2"><i class="fas fa-calendar-alt me-2 text-primary-custom"></i>{% if is_rtl %}{{ article.publish_at.strftime('%d %B %Y') }}{% else %}{{ article.publish_at.strftime('%B %d, %Y') }}{% endif %}</div>
              {% set rt = article.get_reading_time(current_language) %}
              <div class="d-flex align-items-center text-muted"><i class="fas fa-clock me-2 text-primary-custom"></i>{% if is_rtl %}وقت القراءة: {{ rt }} {{ 'دقيقة' if rt == 1 else 'دقائق' }}{% else %}{{ _('Reading time') }}: {{ rt }} {{ _('minutes') }}{% endif %}</div>
            </div>
          </div>

          <!-- Quick Links Side -->
          <div class="card border-0 shadow-lg mb-4 quick-links-card">
            <div class="card-body">
              <h6 class="card-title mb-3"><i class="fas fa-link me-2" style="color:#689b8a;"></i>{% if is_rtl %}روابط سريعة{% else %}{{ _('Quick Links') }}{% endif %}</h6>
              <ul class="list-unstyled mb-0 {{ 'arabic-text' if is_rtl else 'english-text' }}">
                <li class="mb-2"><a class="text-decoration-none ql-item" href="{{ url_for('main.products') }}"><span class="ql-left"><i class="fas fa-leaf"></i>{% if is_rtl %}المنتجات{% else %}{{ _('Products') }}{% endif %}</span><i class="fas fa-chevron-{{ 'left' if is_rtl else 'right' }} ql-arrow"></i></a></li>
                <li class="mb-2"><a class="text-decoration-none ql-item" href="{{ url_for('main.certifications') }}"><span class="ql-left"><i class="fas fa-certificate"></i>{% if is_rtl %}الشهادات{% else %}{{ _('Certifications') }}{% endif %}</span><i class="fas fa-chevron-{{ 'left' if is_rtl else 'right' }} ql-arrow"></i></a></li>
                <li class="mb-2"><a class="text-decoration-none ql-item" href="{{ url_for('main.services') }}"><span class="ql-left"><i class="fas fa-shipping-fast"></i>{% if is_rtl %}خدمات التصدير{% else %}{{ _('Export Services') }}{% endif %}</span><i class="fas fa-chevron-{{ 'left' if is_rtl else 'right' }} ql-arrow"></i></a></li>
                <li><a class="text-decoration-none ql-item" href="{{ url_for('main.contact') }}"><span class="ql-left"><i class="fas fa-envelope"></i>{% if is_rtl %}تواصل معنا{% else %}{{ _('Contact Us') }}{% endif %}</span><i class="fas fa-chevron-{{ 'left' if is_rtl else 'right' }} ql-arrow"></i></a></li>
              </ul>
            </div>
          </div>

          <!-- CTA Side -->
          <div class="card border-0 shadow-lg partner-cta">
            <div class="card-body text-center">
              <h5 class="card-title">{% if is_rtl %}جاهز للتعاون؟{% else %}{{ _('Ready to Partner?') }}{% endif %}</h5>
              <p class="card-text">{% if is_rtl %}تواصل مع فريقنا لحلول توريد مخصصة.{% else %}{{ _('Get in touch with our team for tailored sourcing solutions.') }}{% endif %}</p>
              <a href="{{ url_for('main.contact') }}" class="btn btn-light cta-btn hover-lift"><i class="fas fa-envelope me-2"></i>{% if is_rtl %}تواصل الآن{% else %}{{ _('Contact Us') }}{% endif %}</a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Related Articles (match homepage Latest Updates style) -->
{% if related_articles %}
<section class="py-5 bg-gradient-light position-relative overflow-hidden related-section">
  <div class="container position-relative">
    <div class="text-center mb-5" data-aos="fade-up">
      <div class="section-badge badge bg-gradient-secondary text-dark px-4 py-2 rounded-pill mb-3 fs-6 fw-semibold">
        <i class="fas fa-newspaper me-2"></i>{% if is_rtl %}مقالات ذات صلة{% else %}{{ _('Related Articles') }}{% endif %}
      </div>
      <h2 class="section-heading {{ 'arabic-heading' if is_rtl else 'english-heading' }} gradient-text">{% if is_rtl %}المزيد من الأخبار والتحديثات{% else %}{{ _('More News & Updates') }}{% endif %}</h2>
      <p class="lead text-muted {{ 'arabic-text' if is_rtl else 'english-text' }} col-lg-8 mx-auto">{% if is_rtl %}اكتشف المزيد من التطورات والرؤى من إمداد جلوبال{% else %}{{ _('Explore more developments and insights from Emdad Global') }}{% endif %}</p>
    </div>

    <div class="row g-4">
      {% for related in related_articles %}
      <div class="col-lg-4 col-md-6" data-aos="fade-up" data-aos-delay="{{ loop.index0 * 100 }}">
        <article class="news-card card h-100 border-0 shadow-lg hover-lift position-relative overflow-hidden">
          <div class="news-image-wrapper position-relative overflow-hidden">
            {% if related.cover_image %}
            <img src="{{ url_for('main.uploaded_file', filename='news/' + related.cover_image) }}" class="card-img-top news-image" alt="{{ related.get_title(current_language) }}" style="height: 250px; object-fit: cover;">
            {% else %}
            <div class="card-img-top bg-gradient-primary d-flex align-items-center justify-content-center" style="height: 250px;">
              <i class="fas fa-newspaper fa-4x text-white opacity-75"></i>
            </div>
            {% endif %}

            <!-- Date Badge -->
            <div class="position-absolute top-0 start-0 p-3">
        <style>
          /* Center Arabic heading + lead in Related section explicitly */
          .related-section .arabic-heading,
          .related-section .arabic-text { text-align:center !important; margin-left:auto !important; margin-right:auto !important; display:block; }
          /* Green buttons with peach hover for Read More */
          .related-section .btn-outline-primary { border-color:#689b8a !important; color:#689b8a !important; }
          .related-section .btn-outline-primary:hover { background:#f9cb99 !important; border-color:#f9cb99 !important; color:#103d24 !important; }
        </style>
              <div class="date-badge bg-white text-dark rounded-pill px-3 py-2 shadow-sm">
                <i class="fas fa-calendar-alt me-2 text-primary-custom"></i>
                <small class="fw-semibold">{% if is_rtl %}{{ related.publish_at.strftime('%d %b') }}{% else %}{{ related.publish_at.strftime('%b %d') }}{% endif %}</small>
              </div>
            </div>
          </div>

          <div class="card-body p-4">
            <div class="news-meta mb-3">
              <span class="badge bg-light text-primary-custom fw-semibold"><i class="fas fa-tag me-1"></i>{{ _('News') }}</span>
              {% if related.featured %}
              <span class="badge bg-gradient-secondary text-dark fw-semibold ms-2"><i class="fas fa-star me-1"></i>{{ _('Featured') }}</span>
              {% endif %}
            </div>

            <h5 class="card-heading english-heading mb-3">{{ related.get_title(current_language) }}</h5>
            <p class="card-text text-muted mb-4">{{ related.get_excerpt(current_language) | truncate(120) if related.get_excerpt(current_language) else _('Stay updated with the latest news and developments from Emdad Global.') }}</p>

            <div class="d-flex justify-content-between align-items-center mt-auto">
              <small class="text-muted"><i class="fas fa-clock me-1"></i>{% if is_rtl %}{{ related.publish_at.strftime('%d %B %Y') }}{% else %}{{ related.publish_at.strftime('%B %d, %Y') }}{% endif %}</small>
              <a href="{{ url_for('main.news_detail', slug=related.slug) }}" class="btn btn-outline-primary btn-sm hover-lift"><i class="fas fa-arrow-right me-1"></i>{{ _('Read More') }}</a>
            </div>
          </div>
        </article>
      </div>
      {% endfor %}
    </div>

    <div class="text-center mt-4" data-aos="fade-up" data-aos-delay="400">
      <a href="{{ url_for('main.news') }}" class="btn btn-primary btn-lg px-5 py-3 hover-lift"><i class="fas fa-newspaper me-2"></i>{{ _('View All News') }}</a>
    </div>
  </div>
</section>
{% endif %}

<!-- Global CTA (same as News page bottom) -->
<section class="py-5 bg-gradient-light">
  <div class="container">
    <div class="row align-items-center text-center">
      <div class="col-lg-8 mx-auto" data-aos="fade-up">
        <h2 class="display-6 english-heading mb-3">{% if is_rtl %}جاهز للتعاون معنا؟{% else %}{{ _('Ready to Partner with Us?') }}{% endif %}</h2>
        <p class="lead text-muted mb-4">{% if is_rtl %}تواصل معنا الآن واكتشف حلول التوريد الموثوقة لأسواقك العالمية.{% else %}{{ _('Get in touch and discover reliable sourcing solutions for your markets.') }}{% endif %}</p>
        <div class="d-flex flex-wrap justify-content-center gap-3">
          <a href="{{ url_for('main.contact') }}" class="btn btn-primary btn-lg px-5 py-3 hover-lift"><i class="fas fa-envelope me-2"></i>{% if is_rtl %}تواصل الآن{% else %}{{ _('Contact Us') }}{% endif %}</a>
          <a href="{{ url_for('main.products') }}" class="btn btn-outline-primary btn-lg px-5 py-3 hover-lift btn-text"><i class="fas fa-leaf me-2"></i>{% if is_rtl %}تصفح المنتجات{% else %}{{ _('View Products') }}{% endif %}</a>
        </div>
      </div>
    </div>
  </div>
</section>
{% endblock %}

{% block extra_scripts %}
<script>
// Social sharing functionality
function shareArticle(platform) {
    const url = encodeURIComponent(window.location.href);
    const title = encodeURIComponent(document.title);
    const text = encodeURIComponent('{{ article.get_excerpt() | truncate(100) }}');

    let shareUrl = '';

    switch(platform) {
        case 'facebook':
            shareUrl = `https://www.facebook.com/sharer/sharer.php?u=${url}`;
            break;
        case 'twitter':
            shareUrl = `https://twitter.com/intent/tweet?url=${url}&text=${title}`;
            break;
        case 'whatsapp':
            shareUrl = `https://wa.me/?text=${title}%20${url}`;
            break;
        case 'copy':
            navigator.clipboard.writeText(window.location.href).then(() => {
                // Show success message
                const button = event.target.closest('button');
                const originalContent = button.innerHTML;
                button.innerHTML = '<i class="fas fa-check me-1"></i>Copied!';
                button.classList.add('btn-success');
                button.classList.remove('btn-outline-secondary', 'btn-secondary');

                setTimeout(() => {
                    button.innerHTML = originalContent;
                    button.classList.remove('btn-success');
                    button.classList.add('btn-outline-secondary');
                }, 2000);
            });
            return;
    }

    if (shareUrl) {
        window.open(shareUrl, '_blank', 'width=600,height=400');
    }
}

document.addEventListener('DOMContentLoaded', function() {
    // Add hover effects to related news cards
    const newsCards = document.querySelectorAll('.news-card');
    newsCards.forEach(card => {
        card.addEventListener('mouseenter', function() {
            this.style.transform = 'translateY(-5px)';
            this.style.transition = 'transform 0.3s ease';
        });

        card.addEventListener('mouseleave', function() {
            this.style.transform = 'translateY(0)';
        });
    });

    // Smooth scrolling for internal links
    const articleContent = document.querySelector('.article-content');
    if (articleContent) {
        const links = articleContent.querySelectorAll('a[href^="#"]');
        links.forEach(link => {
            link.addEventListener('click', function(e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });
    }

    // Reading progress indicator
    const article = document.querySelector('.article-content');
    if (article) {
        const progressBar = document.createElement('div');
        progressBar.style.cssText = `
            position: fixed;
            top: 0;
            left: 0;
            width: 0%;
            height: 3px;
            background: linear-gradient(to right, #007bff, #28a745);
            z-index: 9999;
            transition: width 0.3s ease;
        `;
        document.body.appendChild(progressBar);

        window.addEventListener('scroll', function() {
            const articleTop = article.offsetTop;
            const articleHeight = article.offsetHeight;
            const windowHeight = window.innerHeight;
            const scrollTop = window.pageYOffset;

            const progress = Math.min(
                Math.max((scrollTop - articleTop + windowHeight) / articleHeight, 0),
                1
            );

            progressBar.style.width = (progress * 100) + '%';
        });
    }
});
</script>
{% endblock %}
