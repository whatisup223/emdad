{% extends "base.html" %}

{% block title %}{{ SITE_NAME }} - {{ _('Premium Egyptian') }} {{ _('Agricultural') }} {{ _('Exports') }}{% endblock %}

{% block extra_head %}
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/jsvectormap@latest/dist/css/jsvectormap.min.css">
<style>
  /* tooltip style for vector map */
  .jvm-tooltip { font-weight:700; }
  /* Center Arabic category titles & descriptions only in homepage categories section */
  html[lang="ar"] #featured-categories .arabic-heading,
  html[lang="ar"] #featured-categories .arabic-text {
    text-align: center !important;
  }
</style>
{% endblock %}


{% block content %}
<!-- Hero Section -->
<section class="hero-section dark-overlay-medium position-relative overflow-hidden min-vh-100 d-flex align-items-center">
    <!-- Agricultural Pattern Overlay -->
    <div class="agricultural-pattern"></div>

    <!-- Simple Agricultural Icons -->
    <div class="floating-agricultural-icons">
        <i class="fas fa-leaf simple-agri-icon icon-leaf-1"></i>
        <i class="fas fa-seedling simple-agri-icon icon-seedling-1"></i>
        <i class="fas fa-apple-alt simple-agri-icon icon-fruit-1"></i>
        <i class="fas fa-wheat simple-agri-icon icon-wheat-1"></i>
        <i class="fas fa-carrot simple-agri-icon icon-veg-1"></i>
        <i class="fas fa-lemon simple-agri-icon icon-citrus-1"></i>
    </div>

    <!-- START_HERO_EXPORT_ANIMATIONS (reversible: say "تراجع" to remove) -->
    <div class="hero-export-animations">
        <!-- Background planes -->
        <div class="hero-plane hero-plane-1">
            <i class="fas fa-plane"></i>
        </div>
        <div class="hero-plane hero-plane-2">
            <i class="fas fa-plane"></i>
        </div>

        <!-- Background ships -->
        <div class="hero-ship hero-ship-1">
            <i class="fas fa-ship"></i>
        </div>

        <!-- Floating export boxes -->
        <div class="hero-export-box hero-box-1">
            <i class="fas fa-box"></i>
        </div>
        <div class="hero-export-box hero-box-2">
            <i class="fas fa-boxes"></i>
        </div>
    </div>
    <!-- END_HERO_EXPORT_ANIMATIONS -->



    <div class="container position-relative z-index-2">
        <div class="row align-items-center min-vh-75">
            <div class="col-lg-6" data-aos="fade-right" data-aos-duration="1200">
                <div class="hero-content">
                    <div class="badge px-4 py-2 rounded-pill mb-4 fs-6 fw-semibold">
                        <i class="fas fa-star me-2"></i>{{ _('Premium Quality Since 1999') }}
                    </div>

                    <h1 class="hero-title mb-4">
                        {{ _('Premium Egyptian') }}
                        <span style="color: #f9cb99; text-shadow: 2px 2px 8px rgba(0, 0, 0, 0.5);">{{ _('Agricultural') }}</span>
                        {{ _('Exports') }}
                    </h1>

                    <p class="lead english-text mb-4">
                        {{ _('Supplying the world with the finest Egyptian citrus fruits, fresh produce, and frozen products.') }}
                        {{ _('Quality assured with international certifications and reliable global logistics.') }}
                    </p>

                    <!-- New Action Buttons -->
                    <div class="hero-action-buttons d-flex flex-column flex-sm-row gap-3 mb-4">
                        <a href="{{ url_for('main.certifications') }}" class="btn btn-md px-4 py-2 hover-lift flex-fill flex-sm-fill-0" style="background: linear-gradient(135deg, #689b8a, #2c5f4f); color: white; font-weight: 600; border: none; box-shadow: 0 4px 15px rgba(104, 155, 138, 0.4); border-radius: 10px; font-size: 0.95rem;">
                            <i class="fas fa-certificate me-2"></i>{{ _('Certifications') }}
                        </a>
                        <a href="{{ url_for('main.contact') }}" class="btn btn-outline-light btn-md px-4 py-2 hover-lift flex-fill flex-sm-fill-0" style="border: 2px solid rgba(255, 255, 255, 0.8); color: white; font-weight: 600; backdrop-filter: blur(10px); background: rgba(255, 255, 255, 0.1); border-radius: 10px; font-size: 0.95rem;">
                            <i class="fas fa-quote-left me-2"></i>{{ _('Get Quote') }}
                        </a>
                    </div>

                    <div class="hero-buttons d-flex flex-wrap gap-3 mb-5">
                        <a href="{{ url_for('main.contact') }}" class="btn btn-lg px-5 py-3 hover-lift" style="background: linear-gradient(135deg, #f9cb99, #fbd7b0); color: #689b8a; font-weight: 700; border: none; box-shadow: 0 4px 15px rgba(249, 203, 153, 0.4);">
                            <span class="me-2 d-inline-flex align-items-center" aria-hidden="true" style="line-height:0;">
                            <svg viewBox="0 0 24 24" width="18" height="18" role="img" aria-hidden="true" style="display:block;fill:currentColor;"><path d="M20.5 7.5h-6.25l-1.6-2.4a2 2 0 00-1.66-.9H3.5A2.5 2.5 0 001 6.7v10.8A2.5 2.5 0 003.5 20h17a2.5 2.5 0 002.5-2.5v-7a3 3 0 00-2.5-3zm-8.5 0h-1l-.8-1.2c-.09-.14-.24-.3-.45-.3H3.5a.5.5 0 00-.5.5v.5h9.5zM3 8.5h17.5c.83 0 1.5.67 1.5 1.5v7c0 .55-.45 1-1 1H3.5c-.28 0-.5-.22-.5-.5v-9zM6 13.5h5c.28 0 .5.22.5.5s-.22.5-.5.5H6a.5.5 0 010-1zm0 2h9c.28 0 .5.22.5.5s-.22.5-.5.5H6a.5.5 0 010-1z"/></svg>
                        </span>{{ _('Request a Quote') }}
                        </a>
                        <a href="{{ url_for('main.products') }}" class="btn btn-outline-light btn-lg px-5 py-3 hover-lift" style="border: 2px solid white; color: white; font-weight: 600; backdrop-filter: blur(10px); background: rgba(255, 255, 255, 0.1);">
                            <i class="fas fa-leaf me-2"></i>{{ _('View Products') }}
                        </a>
                    </div>


                </div>
            </div>

            <div class="col-lg-6" data-aos="fade-left" data-aos-duration="1200" data-aos-delay="200">
                <div class="hero-visual position-relative">
                    <!-- Main Stats Card -->
                    <div class="hero-stats card border-0 shadow-xl p-4 mb-4" style="background: rgba(255, 255, 255, 0.15); backdrop-filter: blur(10px); border: 1px solid rgba(255, 255, 255, 0.2);">
                        <div class="row text-center g-4">
                            <div class="col-4">
                                <div class="stat-item">
                                    <div class="stat-number fw-bold display-6 mb-2" data-count="50" style="color: #f9cb99 !important;">0</div>
                                    <div class="stat-label fw-semibold" style="color: rgba(255, 255, 255, 0.9);">{{ _('Countries Served') }}</div>
                                </div>
                            </div>
                            <div class="col-4">
                                <div class="stat-item">
                                    <div class="stat-number fw-bold display-6 mb-2" data-count="100" style="color: #f9cb99 !important;">0</div>
                                    <div class="stat-label fw-semibold" style="color: rgba(255, 255, 255, 0.9);">{{ _('Premium Products') }}</div>
                                </div>
                            </div>
                            <div class="col-4">
                                <div class="stat-item">
                                    <div class="stat-number fw-bold display-6 mb-2" data-count="25" style="color: #f9cb99 !important;">0</div>
                                    <div class="stat-label fw-semibold" style="color: rgba(255, 255, 255, 0.9);">{{ _('Years Experience') }}</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Achievement Cards Row -->
                    <div class="row g-3 mb-4">
                        <div class="col-6">
                            <div class="achievement-card card border-0 shadow-lg p-3" style="background: rgba(255, 255, 255, 0.95); backdrop-filter: blur(10px);">
                                <div class="d-flex align-items-center">
                                    <div class="icon-wrapper rounded-circle p-2 me-3" style="width: 45px; height: 45px; background: linear-gradient(135deg, #689b8a, #5a8575); color: white;">
                                        <i class="fas fa-award fs-6"></i>
                                    </div>
                                    <div>
                                        <div class="fw-bold small text-dark">
                                            {% if session.get('language') == 'ar' %}
                                                الممارسات الزراعية الجيدة
                                            {% else %}
                                                GlobalG.A.P
                                            {% endif %}
                                        </div>
                                        <small class="text-muted">{{ _('Certified') }}</small>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="col-6">
                            <div class="achievement-card card border-0 shadow-lg p-3" style="background: rgba(255, 255, 255, 0.95); backdrop-filter: blur(10px);">
                                <div class="d-flex align-items-center">
                                    <div class="icon-wrapper rounded-circle p-2 me-3" style="width: 45px; height: 45px; background: linear-gradient(135deg, #f9cb99, #fbd7b0); color: #689b8a;">
                                        <i class="fas fa-shipping-fast fs-6"></i>
                                    </div>
                                    <div>
                                        <div class="fw-bold small text-dark">{{ _('Cold Chain') }}</div>
                                        <small class="text-muted">{{ _('Logistics') }}</small>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>


                </div>
            </div>
        </div>

        <!-- Scroll Indicator -->
        <div class="scroll-indicator position-absolute bottom-0 start-50 translate-middle-x mb-4">
            <div class="scroll-arrow bounce">
                <i class="fas fa-chevron-down text-white fs-4"></i>
            </div>
        </div>
    </div>


</section>

<!-- START_WHY_US_AFTER_HERO (reversible: say "تراجع" to remove) -->
<!-- moved below About Intro as requested -->
<!-- END_WHY_US_AFTER_HERO -->


<!-- About Intro Section -->
<!-- Always show this section with fallback content -->
<style>
    /* Fix z-index issue for discover more button */
    .about-content-wrapper {
        position: relative;
        z-index: 100 !important;
    }
    .about-action {
        position: relative !important;
        z-index: 200 !important;
    }
    .about-single-image {
        z-index: 1 !important;
    }
    .single-image-wrapper {
        z-index: 1 !important;
    }

    /* Ensure image column overlays are contained within right column */
    .about-section .single-image-wrapper { position: relative !important; }
    .about-section .about-single-image { position: relative !important; }


    /* Export Animation Styles */
    .export-animations {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        pointer-events: none;
        z-index: 3;
    }

    /* Plane Animations */
    .plane {
        position: absolute;
        color: #f9cb99;
        font-size: 1.5rem;
        opacity: 0.8;
    }

    .plane-1 {
        top: 20%;
        left: -50px;
        animation: flyAcross1 8s infinite linear;
    }

    .plane-2 {
        top: 60%;
        right: -50px;
        animation: flyAcross2 10s infinite linear;
        animation-delay: 4s;
    }



    /* Globe with Pulse */
    .globe {
        position: absolute;
        top: 15%;
        right: 15%;
        color: #f9cb99;
        font-size: 2rem;
        opacity: 0.9;
    }

    .globe i {
        animation: rotate 20s infinite linear;
    }

    .pulse-ring {
        position: absolute;
        top: 50%;
        left: 50%;
        width: 40px;
        height: 40px;

        border: 2px solid #f9cb99;
        border-radius: 50%;
        transform: translate(-50%, -50%);
        animation: pulse 3s infinite;
        opacity: 0.6;
    }



    /* Keyframe Animations */
    @keyframes flyAcross1 {
        0% { left: -50px; transform: rotate(0deg); }
        50% { left: 50%; transform: rotate(5deg); }
        100% { left: calc(100% + 50px); transform: rotate(0deg); }
    }

    @keyframes flyAcross2 {
        0% { right: -50px; transform: rotate(180deg); }
        50% { right: 50%; transform: rotate(175deg); }
        100% { right: calc(100% + 50px); transform: rotate(180deg); }
    }



    @keyframes rotate {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
    }

    @keyframes pulse {
        0% { transform: translate(-50%, -50%) scale(1); opacity: 0.6; }
        50% { transform: translate(-50%, -50%) scale(1.5); opacity: 0.3; }
        100% { transform: translate(-50%, -50%) scale(2); opacity: 0; }
    }



    /* Responsive adjustments */
    @media (max-width: 768px) {
        .plane, .ship, .truck { font-size: 1.2rem; }
        .globe { font-size: 1.5rem; }
        .export-box { font-size: 1rem; }
    }

    /* Hero Export Animations */
    .hero-export-animations {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        pointer-events: none;
        z-index: 1;
        opacity: 0.6;
    }

    .hero-plane {
        position: absolute;
        color: #f9cb99;
        font-size: 1.2rem;
        opacity: 0.4;
    }

    .hero-plane-1 {
        top: 15%;
        left: -40px;
        animation: heroFlyAcross1 20s infinite linear;
    }

    .hero-plane-2 {
        top: 70%;
        right: -40px;
        animation: heroFlyAcross2 25s infinite linear;
        animation-delay: 10s;
    }

    .hero-ship {
        position: absolute;
        color: #f9cb99;
        font-size: 1.4rem;
        opacity: 0.3;
    }

    .hero-ship-1 {
        bottom: 20%;
        left: -50px;
        animation: heroSailAcross 30s infinite linear;
        animation-delay: 5s;
    }

    .hero-export-box {
        position: absolute;
        color: #f9cb99;
        font-size: 1rem;
        opacity: 0.4;
    }

    .hero-box-1 {
        top: 40%;
        left: 5%;
        animation: heroFloat 8s infinite;
    }

    .hero-box-2 {
        bottom: 35%;
        right: 10%;
        animation: heroFloat 8s infinite;
        animation-delay: 4s;
    }

    @keyframes heroFlyAcross1 {
        0% { left: -40px; transform: rotate(15deg); }
        100% { left: calc(100% + 40px); transform: rotate(15deg); }
    }

    @keyframes heroFlyAcross2 {
        0% { right: -40px; transform: rotate(195deg); }
        100% { right: calc(100% + 40px); transform: rotate(195deg); }
    }

    @keyframes heroSailAcross {
        0% { left: -50px; }
        100% { left: calc(100% + 50px); }
    }

    @keyframes heroFloat {
        0%, 100% { transform: translateY(0) rotate(0deg); }
        25% { transform: translateY(-15px) rotate(5deg); }
        50% { transform: translateY(-10px) rotate(0deg); }
        75% { transform: translateY(-20px) rotate(-5deg); }
    }
</style>
<section class="about-section py-5">
    <div class="container">
        <div class="row align-items-center g-5">
            <!-- Content Column -->
            <div class="col-lg-6" data-aos="fade-right" data-aos-duration="1000">
                <div class="about-content-wrapper">
                    <div class="about-intro-badge">{{ _('Our Introduction') }}</div>
                    {% if about_intro %}
                        <h2 class="about-main-title">{{ about_intro.get_title(current_language) }}</h2>
                        <div class="about-description">
                            {{ about_intro.get_content(current_language) | safe }}
                        </div>
                    {% else %}
                        <h2 class="about-main-title">
                            {% if current_language == 'ar' %}حول إمداد جلوبال{% else %}About Emdad Global{% endif %}
                        </h2>
                        <div class="about-description">
                            {% if current_language == 'ar' %}
                                <p>إمداد جلوبال هي شركة تصدير مصرية رائدة متخصصة في المنتجات الزراعية الممتازة. مع أكثر من 25 عاماً من الخبرة، بنينا سمعة في تقديم أعلى جودة من الفواكه والخضروات الطازجة والمجمدة إلى الأسواق في جميع أنحاء العالم.</p>
                                <p>التزامنا بالتميز، إلى جانب المرافق الحديثة والشهادات الدولية، يضمن أن منتجاتنا تلبي أصرم معايير الجودة التي تتطلبها الأسواق العالمية.</p>
                            {% else %}
                                <p>Emdad Global is a leading Egyptian export company specializing in premium agricultural products. With over 25 years of experience, we have built a reputation for delivering the highest quality fresh and frozen fruits and vegetables to markets worldwide.</p>
                                <p>Our commitment to excellence, combined with state-of-the-art facilities and international certifications, ensures that our products meet the strictest quality standards demanded by global markets.</p>
                            {% endif %}
                        </div>
                    {% endif %}

                    <!-- Features Grid -->
                    <div class="about-features">
                        <div class="feature-item">
                            <div class="feature-icon">
                                <i class="fas fa-user-tie"></i>
                            </div>
                            <div class="feature-content">
                                <h6>{{ _('Professional Farmers') }}</h6>
                            </div>
                        </div>

                        <div class="feature-item">
                            <div class="feature-icon">
                                <i class="fas fa-leaf"></i>
                            </div>
                            <div class="feature-content">
                                <h6>{{ _('Organic & Eco Solutions') }}</h6>
                            </div>
                        </div>
                    </div>




                        <style>
                          /* Create new stacking context for left column so it sits above any siblings */
                          .about-section .col-lg-6[data-aos="fade-right"] { isolation: isolate !important; z-index: 100000 !important; }
                        </style>






                </div>
            </div>

            <!-- Images Column -->
            <div class="col-lg-6" data-aos="fade-left" data-aos-duration="1000" data-aos-delay="200">
                <div class="about-single-image">
                    <!-- Main Image -->
                    <div class="single-image-wrapper">
                        {% if about_intro and about_intro.image_path %}
                        <img src="{{ url_for('static', filename='uploads/' + about_intro.image_path) }}"
                             alt="{{ about_intro.get_title(current_language) }}" class="single-about-image">
                        {% else %}
                        <img src="{{ url_for('static', filename='images/aboutimg.webp') }}"
                             alt="About Emdad Global" class="single-about-image">
                        {% endif %}

                    </div>

                </div>
            </div>
        </div>
    </div>
</section>

<!-- Stats Highlights Section (Cards) - separate from About -->

<style>
  /* Background color and animated shapes for stats section */
  .stats-highlight-section {
    background: #689b8a; /* requested color */
    position: relative;
    overflow: hidden;
  }
  .stats-animated-bg { position:absolute; inset:0; z-index:0; pointer-events:none; }
  .stats-shape { position:absolute; border-radius:50%; opacity:.25; filter: blur(0.5px); }
  .shape-1 { width:160px; height:160px; background: rgba(255,255,255,.3); top:10%; left:8%; animation: floatY 9s ease-in-out infinite; }
  .shape-2 { width:220px; height:220px; background: rgba(255,255,255,.18); bottom:12%; right:10%; animation: driftX 11s ease-in-out infinite; }
  .shape-3 { width:120px; height:120px; background: rgba(255,255,255,.25); top:40%; right:25%; animation: floatY 13s ease-in-out infinite reverse; }
  .shape-4 { width:90px; height:90px; background: rgba(255,255,255,.2); bottom:22%; left:20%; animation: driftX 10s ease-in-out infinite reverse; }
  @keyframes floatY { 0%{ transform: translateY(0);} 50%{ transform: translateY(-12px);} 100%{ transform: translateY(0);} }
  @keyframes driftX { 0%{ transform: translateX(0);} 50%{ transform: translateX(14px);} 100%{ transform: translateX(0);} }
  /* ensure content above shapes */
  .stats-highlight-section > .container { position:relative; z-index:1; }

  /* make text white inside this section for better contrast */
  .stats-highlight-section .section-heading,
  .stats-highlight-section .stat-number,
  .stats-highlight-section .stat-label { color:#fff !important; }
</style>

<section class="py-5 position-relative overflow-hidden stats-highlight-section">
    <!-- Animated background shapes -->
    <div class="stats-animated-bg" aria-hidden="true">
      <span class="stats-shape shape-1"></span>
      <span class="stats-shape shape-2"></span>
      <span class="stats-shape shape-3"></span>
      <span class="stats-shape shape-4"></span>
    </div>

  <div class="container">
    <div class="text-center mb-5" data-aos="fade-up">
      <div class="section-badge badge bg-gradient-primary text-white px-4 py-2 rounded-pill mb-3 fs-6 fw-semibold">
        {% if session.get('language') == 'ar' %} لماذا تختارنا {% else %} {{ _('Why Choose Us') }} {% endif %}
      </div>
      <h2 class="section-heading">
        {% if session.get('language') == 'ar' %} شريكك الموثوق للتصدير {% else %} {{ _('Your Trusted Export Partner') }} {% endif %}
      </h2>
    </div>

    <div class="row g-4">
      <div class="col-6 col-lg-3" data-aos="fade-up" data-aos-delay="0">
        <div class="stat-card card border-0 shadow-lg text-center p-4 glass-effect">
          <div class="stat-icon bg-gradient-secondary text-dark rounded-circle d-inline-flex align-items-center justify-content-center mb-3" style="width: 70px; height: 70px;">
            <i class="fas fa-globe-americas fs-3"></i>
          </div>
          <div class="stat-number display-5 fw-bold text-primary-custom mb-2" data-count="50">0</div>
          <div class="stat-label fw-semibold">{{ _('Countries Served') }}</div>
        </div>
      </div>

      <div class="col-6 col-lg-3" data-aos="fade-up" data-aos-delay="100">
        <div class="stat-card card border-0 shadow-lg text-center p-4 glass-effect">
          <div class="stat-icon bg-gradient-secondary text-dark rounded-circle d-inline-flex align-items-center justify-content-center mb-3" style="width: 70px; height: 70px;">
            <i class="fas fa-leaf fs-3"></i>
          </div>
          <div class="stat-number display-5 fw-bold text-primary-custom mb-2" data-count="100">0</div>
          <div class="stat-label fw-semibold">{{ _('Premium Products') }}</div>
        </div>
      </div>

      <div class="col-6 col-lg-3" data-aos="fade-up" data-aos-delay="200">
        <div class="stat-card card border-0 shadow-lg text-center p-4 glass-effect">
          <div class="stat-icon bg-gradient-secondary text-dark rounded-circle d-inline-flex align-items-center justify-content-center mb-3" style="width: 70px; height: 70px;">
            <i class="fas fa-calendar-alt fs-3"></i>
          </div>
          <div class="stat-number display-5 fw-bold text-primary-custom mb-2" data-count="25">0</div>
          <div class="stat-label fw-semibold">{{ _('Years Experience') }}</div>
        </div>
      </div>

      <div class="col-6 col-lg-3" data-aos="fade-up" data-aos-delay="300">
        <div class="stat-card card border-0 shadow-lg text-center p-4 glass-effect">
          <div class="stat-icon bg-gradient-secondary text-dark rounded-circle d-inline-flex align-items-center justify-content-center mb-3" style="width: 70px; height: 70px;">
            <i class="fas fa-users fs-3"></i>
          </div>
          <div class="stat-number display-5 fw-bold text-primary-custom mb-2" data-count="500">0</div>
          <div class="stat-label fw-semibold">{{ _('Satisfied Clients') }}</div>
        </div>
      </div>
    </div>
  </div>
</section>


<!-- Featured Categories Section -->
<section id="featured-categories" class="py-5 bg-gradient-light position-relative overflow-hidden">
    <!-- Background Pattern -->
    <div class="position-absolute top-0 start-0 w-100 h-100 opacity-50">
        <div class="pattern-dots"></div>
    </div>

    <div class="container position-relative">
        <div class="text-center mb-5" data-aos="fade-up">
            <div class="section-badge badge bg-gradient-primary text-white px-4 py-2 rounded-pill mb-3 fs-6 fw-semibold">
                <i class="fas fa-seedling me-2"></i>{{ _('Product Categories') }}
            </div>
            <h2 class="section-heading english-heading">{{ _('Our Premium Product Range') }}</h2>
            <p class="lead english-text text-muted col-lg-8 mx-auto">
                {{ _('Discover our carefully curated selection of Egyptian agricultural products,') }}
                {{ _('each category representing the finest quality and authentic taste.') }}
            </p>
        </div>

        <div class="row g-4 stagger-animation">
            {% if featured_categories %}
                {% for category in featured_categories %}
                <div class="col-lg-4 col-md-6" data-aos="fade-up" data-aos-delay="{{ loop.index0 * 100 }}">
                    <div class="category-card card h-100 border-0 shadow-lg hover-lift position-relative overflow-hidden">
                        <!-- Category Image -->
                        <div class="category-image-wrapper position-relative overflow-hidden">
                            {% if category.image_path %}
                            <img src="{{ url_for('main.uploaded_file', filename='categories/' + category.image_path) }}"
                                 class="card-img-top category-image" alt="{{ category.get_name() }}" style="height: 250px; object-fit: cover;">
                            {% else %}
                            <div class="card-img-top bg-gradient-primary d-flex align-items-center justify-content-center" style="height: 250px;">
                                <i class="fas fa-leaf fa-4x text-white opacity-75"></i>
                            </div>
                            {% endif %}

                            <!-- Overlay -->
                            <div class="category-overlay position-absolute top-0 start-0 w-100 h-100 d-flex align-items-center justify-content-center">
                                <div class="overlay-content text-center text-white">
                                    <i class="fas fa-eye fs-2 mb-3"></i>
                                    <p class="fw-semibold">{{ _('Explore Products') }}</p>
                                </div>
                            </div>
                        </div>

                        <!-- Category Content -->
                        <div class="card-body text-center p-4">
                            <div class="category-icon bg-gradient-secondary text-white rounded-circle d-inline-flex align-items-center justify-content-center mb-3" style="width: 60px; height: 60px;">
                                <i class="fas fa-leaf fs-4"></i>
                            </div>

                            <h5 class="card-heading {{ 'arabic-heading' if current_language == 'ar' else 'english-heading' }} mb-3">{{ category.get_name(current_language) }}</h5>
                            <p class="card-text {{ 'arabic-text' if current_language == 'ar' else 'english-text' }} text-muted mb-4">
                                {{ category.get_description(current_language) | truncate(100) if category.get_description(current_language) else _('Premium quality products from Egypt\'s finest agricultural regions.') }}
                            </p>

                            <a href="{{ url_for('main.products', cat=category.key) }}" class="btn btn-outline-primary btn-sm btn-text english-heading px-4 hover-lift">
                                <i class="fas fa-arrow-right me-2"></i>{{ _('View Products') }}
                            </a>
                        </div>

                        <!-- Decorative Element -->
                        <div class="category-decoration position-absolute top-0 end-0 p-3">
                            <div class="decoration-circle bg-gradient-secondary opacity-25 rounded-circle" style="width: 80px; height: 80px; transform: translate(50%, -50%);"></div>
                        </div>
                    </div>
                </div>
                {% endfor %}
            {% else %}
                <!-- Default Categories -->
                {% set default_categories = [
                    {'name': _('Citrus Fruits'), 'icon': 'fas fa-lemon', 'description': _('Premium Egyptian oranges, lemons, and mandarins with exceptional sweetness and quality.')},
                    {'name': _('Fresh Fruits'), 'icon': 'fas fa-apple-alt', 'description': _('Seasonal fresh fruits including grapes, mangoes, and pomegranates from Egyptian farms.')},
                    {'name': _('Fresh Vegetables'), 'icon': 'fas fa-carrot', 'description': _('High-quality vegetables including garlic, onions, and potatoes for global markets.')},
                    {'name': _('Frozen Products'), 'icon': 'fas fa-snowflake', 'description': _('IQF frozen fruits and vegetables maintaining freshness and nutritional value.')}
                ] %}

                {% for category in default_categories %}
                <div class="col-lg-4 col-md-6" data-aos="fade-up" data-aos-delay="{{ loop.index0 * 100 }}">
                    <div class="category-card card h-100 border-0 shadow-lg hover-lift position-relative overflow-hidden">
                        <div class="card-img-top bg-gradient-primary d-flex align-items-center justify-content-center" style="height: 250px;">
                            <i class="{{ category.icon }} fa-4x text-white opacity-75"></i>
                        </div>

                        <div class="card-body text-center p-4">
                            <div class="category-icon bg-gradient-secondary text-white rounded-circle d-inline-flex align-items-center justify-content-center mb-3" style="width: 60px; height: 60px;">
                                <i class="{{ category.icon }} fs-4"></i>
                            </div>

                            <h5 class="card-title fw-bold mb-3">{{ category.name }}</h5>
                            <p class="card-text text-muted mb-4">{{ category.description }}</p>

                            <a href="{{ url_for('main.products') }}" class="btn btn-outline-primary btn-sm px-4 hover-lift">
                                <i class="fas fa-arrow-right me-2"></i>{{ _('View Products') }}
                            </a>
                        </div>
                    </div>
                </div>
                {% endfor %}
            {% endif %}
        </div>

        <!-- View All Categories Button -->
        <div class="text-center mt-5" data-aos="fade-up" data-aos-delay="400">
            <a href="{{ url_for('main.products') }}" class="btn btn-primary btn-lg px-5 py-3 hover-lift">
                <i class="fas fa-th-large me-2"></i>{{ _('View All Categories') }}
            </a>
        </div>
    </div>
</section>

<!-- Featured Products Section -->
<section class="py-5 position-relative overflow-hidden">
    <!-- Background Elements -->
    <div class="position-absolute top-0 start-0 w-100 h-100">
        <div class="bg-gradient-primary opacity-25" style="clip-path: polygon(0 0, 100% 0, 100% 80%, 0 100%);"></div>
    </div>

    <div class="container position-relative">
        <div class="text-center mb-5" data-aos="fade-up">
            <div class="section-badge badge bg-gradient-secondary text-dark px-4 py-2 rounded-pill mb-3 fs-6 fw-semibold">
                <i class="fas fa-star me-2"></i>{{ _('Featured Products') }}
            </div>
            <h2 class="section-heading english-heading gradient-text">{{ _('Premium Quality Selection') }}</h2>
            <p class="lead english-text text-muted col-lg-8 mx-auto">
                {{ _('Discover our handpicked selection of the finest Egyptian agricultural products,') }}
                {{ _('each representing the pinnacle of quality and taste.') }}
            </p>
        </div>

        <div class="row g-4 products-grid">
            {% if featured_products %}
                {% for product in featured_products %}
                <div class="col-lg-4 col-md-6 col-sm-12 product-col" data-aos="fade-up" data-aos-delay="{{ loop.index0 * 100 }}">
                    <div class="product-card card h-100 border-0 shadow-lg hover-lift position-relative overflow-hidden">
                        <!-- Product Badge -->
                        <div class="position-absolute top-0 start-0 p-3 z-index-3">
                            <span class="badge bg-gradient-secondary text-dark fw-semibold">
                                <i class="fas fa-star me-1"></i>{{ _('Featured') }}
                            </span>
                        </div>

                        <!-- Product Image -->
                        <div class="product-image-wrapper position-relative overflow-hidden">
                            {% set main_image = product.get_main_image() %}
                            {% if main_image %}
                            <img src="{{ url_for('main.uploaded_file', filename='products/' + main_image.filename) }}"
                                 class="card-img-top product-image" alt="{{ product.get_name(current_language) }}" style="height: 250px; object-fit: cover;"
                                 loading="eager" decoding="async">
                            {% elif product.image_path %}
                            <img src="{{ url_for('static', filename=product.image_path.replace('static/', '')) }}"
                                 class="card-img-top product-image" alt="{{ product.get_name(current_language) }}" style="height: 250px; object-fit: cover;"
                                 loading="eager" decoding="async"
                                 onerror="
                                 console.log('Image failed to load:', this.src);
                                 this.onerror=null;
                                 var fallbackUrl = '{{ url_for('main.uploaded_file', filename='products/' + (product.slug + '-emdad-global.webp')) }}';
                                 if (this.src !== fallbackUrl) {
                                     console.log('Trying fallback:', fallbackUrl);
                                     this.src = fallbackUrl;
                                     this.onerror = function() {
                                         console.log('Fallback also failed, showing placeholder');
                                         this.closest('.product-image-wrapper')?.insertAdjacentHTML('afterbegin', '<div class=\'card-img-top bg-gradient-primary d-flex align-items-center justify-content-center\' style=\'height: 250px;\'><i class=\'fas fa-apple-alt fa-4x text-white opacity-75\'></i></div>');
                                         this.remove();
                                     };
                                 } else {
                                     console.log('Both original and fallback failed, showing placeholder');
                                     this.closest('.product-image-wrapper')?.insertAdjacentHTML('afterbegin', '<div class=\'card-img-top bg-gradient-primary d-flex align-items-center justify-content-center\' style=\'height: 250px;\'><i class=\'fas fa-apple-alt fa-4x text-white opacity-75\'></i></div>');
                                     this.remove();
                                 }
                                 ">
                            {% else %}
                            <div class="card-img-top bg-gradient-primary d-flex align-items-center justify-content-center" style="height: 250px;">
                                <i class="fas fa-apple-alt fa-4x text-white opacity-75"></i>
                            </div>
                            {% endif %}

                            <!-- Quick View Overlay -->
                            <div class="product-overlay position-absolute top-0 start-0 w-100 h-100 d-flex align-items-center justify-content-center">
                                <div class="overlay-content text-center text-white">
                                    <div class="btn-group-vertical">
                                        <a href="{{ url_for('main.product_detail', slug=product.slug) }}" class="btn btn-light btn-sm mb-2">
                                            <span class="me-1 d-inline-flex align-items-center" aria-hidden="true" style="line-height:0;">
                                                <svg viewBox="0 0 24 24" width="16" height="16" role="img" aria-hidden="true" style="display:block;fill:currentColor;"><path d="M12 5c-7 0-11 7-11 7s4 7 11 7 11-7 11-7-4-7-11-7zm0 11a4 4 0 110-8 4 4 0 010 8z"/></svg>
                                            </span>{{ _('Quick View') }}
                                        </a>
                                        <a href="{{ url_for('main.contact') }}?product={{ product.slug }}" class="btn btn-primary btn-sm">
                                            <span class="me-1 d-inline-flex align-items-center" aria-hidden="true" style="line-height:0;">
                                                <svg viewBox="0 0 24 24" width="16" height="16" role="img" aria-hidden="true" style="display:block;fill:currentColor;"><path d="M20.5 7.5h-6.25l-1.6-2.4a2 2 0 00-1.66-.9H3.5A2.5 2.5 0 001 6.7v10.8A2.5 2.5 0 003.5 20h17a2.5 2.5 0 002.5-2.5v-7a3 3 0 00-2.5-3zm-8.5 0h-1l-.8-1.2c-.09-.14-.24-.3-.45-.3H3.5a.5.5 0 00-.5.5v.5h9.5zM3 8.5h17.5c.83 0 1.5.67 1.5 1.5v7c0 .55-.45 1-1 1H3.5c-.28 0-.5-.22-.5-.5v-9zM6 13.5h5c.28 0 .5.22.5.5s-.22.5-.5.5H6a.5.5 0 010-1zm0 2h9c.28 0 .5.22.5.5s-.22.5-.5.5H6a.5.5 0 010-1z"/></svg>
                                            </span>{{ _('Get Quote') }}
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Product Content -->
                        <div class="card-body p-4">
                            <div class="product-category mb-2">
                                <span class="badge bg-light text-primary-custom fw-semibold">
                                    {{ product.category.get_name(current_language) if product.category else _('Premium') }}
                                </span>
                            </div>

                                <!-- Monthly availability chips -->
                                {% set season = (product.get_seasonality_lang(current_language) or {}) %}
                                {% if 'fresh' in season %}{% set season = season['fresh'] %}{% endif %}
                                {% set months_names_en = ['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'] %}
                                {% set months_names_ar = ['يناير','فبراير','مارس','أبريل','مايو','يونيو','يوليو','أغسطس','سبتمبر','أكتوبر','نوفمبر','ديسمبر'] %}
                                {% set labels_en = {'peak':'Peak','available':'Available','limited':'Limited','off':'Off-season','iqf':'Frozen'} %}
                                {% set labels_ar = {'peak':'ذروة','available':'متاح','limited':'محدود','off':'خارج الموسم','iqf':'مجمّد'} %}
                                <div class="d-flex gap-1 flex-wrap mb-3">
                                  {% set peak = season.get('peak') or [] %}
                                  {% set available = season.get('available') or [] %}
                                  {% set limited = season.get('limited') or [] %}
                                  {% set iqf = season.get('iqf') or [] %}
                                  {% for idx in range(0,12) %}
                                    {% set m = idx+1 %}
                                    {% set st = 'off' %}
                                    {% if m in peak %}{% set st='peak' %}
                                    {% elif m in available %}{% set st='available' %}
                                    {% elif m in limited %}{% set st='limited' %}
                                    {% elif m in iqf %}{% set st='iqf' %}
                                    {% endif %}
                                    {% set label = (labels_ar if is_rtl else labels_en)[st] %}
                                    {% set m_name = months_names_ar[idx] if is_rtl else months_names_en[idx] %}
                                    <span class="rounded-pill px-2 py-1 border small state-chip state-{{ st }}" title="{{ product.get_name(current_language) }} — {{ m_name }} • {{ label }}"></span>
                                  {% endfor %}
                                </div>


                            <h5 class="card-heading {{ 'arabic-heading' if current_language == 'ar' else 'english-heading' }} mb-3">{{ product.get_name(current_language) }}</h5>
                            <p class="card-text {{ 'arabic-text' if current_language == 'ar' else 'english-text' }} text-muted mb-4">
                                {{ product.get_short_description(current_language) | truncate(100) if product.get_short_description(current_language) else _('Premium quality Egyptian agricultural product with exceptional taste and nutritional value.') }}
                            </p>

                            <!-- Product Features -->
                            <div class="product-features mb-4">
                                <div class="row g-2">
                                    <div class="col-6">
                                        <div class="feature-item d-flex align-items-center">
                                            <i class="fas fa-certificate text-success me-2"></i>
                                            <small class="text-muted english-text">{{ _('Certified') }}</small>
                                        </div>
                                    </div>
                                    <div class="col-6">
                                        <div class="feature-item d-flex align-items-center">
                                            <i class="fas fa-leaf text-primary-custom me-2"></i>
                                            <small class="text-muted english-text">{{ _('Fresh') }}</small>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Action Buttons -->
                            <div class="d-flex gap-2 mt-auto">
                                <a href="{{ url_for('main.product_detail', slug=product.slug) }}" class="btn btn-outline-primary btn-text english-heading flex-grow-1 hover-lift">
                                    <i class="fas fa-info-circle me-1"></i>{{ _('Details') }}
                                </a>
                                <a href="{{ url_for('main.contact') }}?product={{ product.slug }}" class="btn btn-primary hover-lift">
                                    <i class="fas fa-envelope"></i>
                                </a>
                            </div>
                        </div>

                        <!-- Decorative Element -->
                        <div class="product-decoration position-absolute top-0 end-0 p-3">
                            <div class="decoration-circle bg-gradient-primary opacity-25 rounded-circle" style="width: 80px; height: 80px; transform: translate(50%, -50%);"></div>
                        </div>
                    </div>
                </div>
                {% endfor %}
            {% else %}
                <!-- Default Products -->
                {% set default_products = [
                    {'name': _('Egyptian Oranges'), 'category': _('Citrus Fruits'), 'icon': 'fas fa-apple-alt', 'color': '#FF8C00', 'description': _('Premium quality Egyptian oranges with exceptional sweetness and juice content.')},
                    {'name': _('Fresh Grapes'), 'category': _('Fresh Fruits'), 'icon': 'fas fa-seedling', 'color': '#8B4513', 'description': _('High-quality table grapes in various varieties for global markets.')},
                    {'name': _('Egyptian Garlic'), 'category': _('Vegetables'), 'icon': 'fas fa-leaf', 'color': '#228B22', 'description': _('Premium white garlic with strong flavor and excellent storage capabilities.')},
                    {'name': _('IQF Strawberries'), 'category': _('Frozen Products'), 'icon': 'fas fa-snowflake', 'color': '#87CEEB', 'description': _('Individually Quick Frozen strawberries maintaining fresh taste and nutrition.')}
                ] %}

                {% for product in default_products %}
                <div class="col-lg-4 col-md-6 col-sm-12 product-col" data-aos="fade-up" data-aos-delay="{{ loop.index0 * 100 }}">
                    <div class="product-card card h-100 border-0 shadow-lg hover-lift position-relative overflow-hidden" style="border-radius: 20px;">
                        <div class="position-absolute top-0 start-0 p-3 z-index-3">
                            <span class="badge text-dark fw-semibold" style="background: linear-gradient(135deg, #ffd700, #ffed4e); box-shadow: 0 4px 15px rgba(255, 215, 0, 0.3);">
                                <i class="fas fa-star me-1"></i>{{ _('Featured') }}
                            </span>
                        </div>

                        <div class="card-img-top bg-gradient-primary d-flex align-items-center justify-content-center position-relative" style="height: 250px;">
                            <div class="position-absolute w-100 h-100" style="background: linear-gradient(135deg, {{ product.color }}15, {{ product.color }}25);"></div>
                            <i class="{{ product.icon }} fa-4x text-white opacity-90 position-relative" style="filter: drop-shadow(0 4px 8px rgba(0,0,0,0.3));"></i>
                        </div>

                        <div class="card-body p-4">
                            <div class="product-category mb-3">
                                <span class="badge text-white fw-semibold px-3 py-2" style="background: linear-gradient(135deg, {{ product.color }}, {{ product.color }}CC); border-radius: 15px;">{{ product.category }}</span>
                            </div>

                            <h5 class="card-title fw-bold mb-3 {{ 'arabic-heading' if current_language == 'ar' else 'english-heading' }}" style="color: #2c5f4f;">{{ product.name }}</h5>
                            <p class="card-text text-muted mb-4 {{ 'arabic-text' if current_language == 'ar' else 'english-text' }}" style="line-height: 1.6;">{{ product.description }}</p>

                            <div class="product-features mb-4">
                                <div class="row g-2">
                                    <div class="col-6">
                                        <div class="feature-item d-flex align-items-center">
                                            <i class="fas fa-certificate text-success me-2"></i>
                                            <small class="text-muted">{{ _('Certified') }}</small>
                                        </div>
                                    </div>
                                    <div class="col-6">
                                        <div class="feature-item d-flex align-items-center">
                                            <i class="fas fa-leaf text-primary-custom me-2"></i>
                                            <small class="text-muted">{{ _('Fresh') }}</small>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="d-flex gap-2 mt-auto">
                                <a href="{{ url_for('main.products') }}" class="btn btn-outline-primary flex-grow-1 hover-lift" style="border-radius: 12px; border-width: 2px;">
                                    <i class="fas fa-info-circle me-1"></i>{{ _('Details') }}
                                </a>
                                <a href="{{ url_for('main.contact') }}" class="btn btn-primary hover-lift" style="border-radius: 12px; background: linear-gradient(135deg, #689b8a, #2c5f4f); border: none; box-shadow: 0 4px 15px rgba(104, 155, 138, 0.3);">
                                    <i class="fas fa-envelope"></i>
                                </a>
                            </div>
                        </div>

                        <!-- Decorative Element -->
                        <div class="product-decoration position-absolute top-0 end-0 p-3">
                            <div class="decoration-circle rounded-circle" style="width: 80px; height: 80px; transform: translate(50%, -50%); background: linear-gradient(135deg, {{ product.color }}30, {{ product.color }}50); backdrop-filter: blur(10px);"></div>
                        </div>
                    </div>
                </div>
                {% endfor %}
            {% endif %}
        </div>

        <!-- View All Products Button -->
        <div class="text-center mt-5" data-aos="fade-up" data-aos-delay="400">
            <a href="{{ url_for('main.products') }}" class="btn btn-primary btn-lg px-5 py-3 hover-lift">
                <i class="fas fa-th-large me-2"></i>{{ _('Explore All Products') }}
            </a>
        </div>
    </div>
</section>

<!-- Statistics & Achievements Section -->
<section class="py-5 bg-gradient-primary text-white position-relative overflow-hidden">
<!-- START_ACHIEVEMENTS_BG (reversible: say "تراجع" to remove) -->
<style>
  .achievements-bg { position:absolute; inset:0; background:url('{{ url_for('static', filename='images/b.png') }}') center/cover no-repeat; opacity:.18; z-index:0; }
  @media (max-width: 576px){ .achievements-bg { opacity:.22; background-position:center top; } }
</style>
<!-- END_ACHIEVEMENTS_BG -->

    <!-- Background Pattern -->
        <div class="achievements-bg"></div>

    <div class="position-absolute top-0 start-0 w-100 h-100">
        <div class="stats-pattern opacity-10"></div>
    </div>

    <div class="container position-relative">
        <div class="row align-items-center">
            <div class="col-lg-6" data-aos="fade-right">
                <div class="stats-content">
                    <div class="section-badge badge bg-gradient-secondary text-dark px-4 py-2 rounded-pill mb-3 fs-6 fw-semibold">
                        <i class="fas fa-chart-line me-2"></i>{{ _('Our Achievements') }}
                    </div>

                    <h2 class="section-heading english-heading text-shadow" style="color: #ffffff;">
                        {{ _('Trusted by') }} {{ _('Customers') }}
                        <span style="color: #f9cb99;">{{ _('Worldwide') }}</span>
                    </h2>

                    <p class="lead english-text mb-4 text-shadow-sm">
                        {{ _('Over two decades of excellence in Egyptian agricultural exports,') }}
                        {{ _('serving customers across 50+ countries with unwavering quality and reliability.') }}
                    </p>

                    <div class="achievements-list">
                        <div class="achievement-item d-flex align-items-center mb-3">
                            <div class="achievement-icon bg-gradient-secondary text-dark rounded-circle d-flex align-items-center justify-content-center me-3" style="width: 50px; height: 50px;">
                                <i class="fas fa-award fs-5"></i>
                            </div>
                            <div>
                                <h6 class="mb-1 fw-bold english-heading" style="color: #ffffff;">{{ _('ISO 22000 Certified') }}</h6>
                                <small class="opacity-75 english-text">{{ _('Food Safety Management System') }}</small>
                            </div>
                        </div>

                        <div class="achievement-item d-flex align-items-center mb-3">
                            <div class="achievement-icon bg-gradient-secondary text-dark rounded-circle d-flex align-items-center justify-content-center me-3" style="width: 50px; height: 50px;">
                                <i class="fas fa-globe fs-5"></i>
                            </div>
                            <div>
                                <h6 class="mb-1 fw-bold {{ 'arabic-heading' if session.get('language') == 'ar' else 'english-heading' }}" style="color: #ffffff;">
                                    {% if session.get('language') == 'ar' %}
                                        معتمد الممارسات الزراعية الجيدة
                                    {% else %}
                                        GlobalG.A.P. Certified
                                    {% endif %}
                                </h6>
                                <small class="opacity-75 {{ 'arabic-text' if session.get('language') == 'ar' else 'english-text' }}">
                                    {% if session.get('language') == 'ar' %}
                                        الممارسات الزراعية الجيدة
                                    {% else %}
                                        Good Agricultural Practices
                                    {% endif %}
                                </small>
                            </div>
                        </div>

                        <div class="achievement-item d-flex align-items-center">
                            <div class="achievement-icon bg-gradient-secondary text-dark rounded-circle d-flex align-items-center justify-content-center me-3" style="width: 50px; height: 50px;">
                                <i class="fas fa-shipping-fast fs-5"></i>
                            </div>
                            <div>
                                <h6 class="mb-1 fw-bold english-heading" style="color: #ffffff;">{{ _('Cold Chain Excellence') }}</h6>
                                <small class="opacity-75 english-text">{{ _('Temperature-controlled logistics') }}</small>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-lg-6" data-aos="fade-left" data-aos-delay="200">
                <!-- Coverage Map (replacing stat cards) -->
                <style>
                  .coverage-map { position: relative; min-height: 360px; border-radius: 20px; overflow: hidden; }
                  .coverage-map .map-grid { position:absolute; inset:0; z-index:0; background:
                    linear-gradient(transparent 49%, rgba(255,255,255,.08) 50%, transparent 51%) 0 0 / 100% 36px,
                    linear-gradient(90deg, transparent 49%, rgba(255,255,255,.08) 50%, transparent 51%) 0 0 / 36px 100%,
                    radial-gradient(circle at 20% 30%, rgba(255,255,255,.08), transparent 45%),
                    radial-gradient(circle at 80% 70%, rgba(255,255,255,.08), transparent 45%);
                  }
                  .coverage-map .coverage-svg { position:absolute; inset:0; z-index:1; }
                  .coverage-map .arc { stroke:#f9cb99; stroke-width:2; fill:none; stroke-dasharray:6 8; opacity:.9; animation: dashMove 6s linear infinite; }
                  .coverage-map .arc.arc-2 { animation-duration: 8s; opacity:.8; }
                  .coverage-map .arc.arc-3 { animation-duration: 10s; opacity:.7; }
                  @keyframes dashMove { to { stroke-dashoffset: -1000; } }
                  .coverage-map .map-pin { position:absolute; width:10px; height:10px; border-radius:50%; background:#f9cb99; box-shadow:0 0 0 2px rgba(249,203,153,.35); z-index:2; }
                  .coverage-map .map-pin .pulse { content:""; position:absolute; inset:-10px; border-radius:50%; border:2px solid rgba(249,203,153,.4); animation:pulse 2.8s ease-out infinite; }
                  .coverage-map .map-pin .dot { position:absolute; inset:0; border-radius:50%; background:#f9cb99; }
                  @keyframes pulse { 0%{ transform:scale(.6); opacity:.8;} 80%{ transform:scale(1.6); opacity:0;} 100%{ opacity:0;} }
                  /* approximate pin positions */
                  .coverage-map .pin-eg { left:46%; top:50%; }
                  .coverage-map .pin-eu { left:48%; top:38%; }
                  .coverage-map .pin-gcc{ left:52.5%; top:55%; }
                  .coverage-map .pin-asia{ left:64%; top:47%; }
                  .coverage-map .map-legend { z-index:2; }

                  /* Map Planes Animation */
                  .map-export-animations {
                    position: absolute !important;
                    top: 0 !important;
                    left: 0 !important;
                    width: 100% !important;
                    height: 100% !important;
                    pointer-events: none !important;
                    z-index: 1000 !important;
                  }

                  .map-plane {
                    position: absolute;
                    color: #f9cb99;
                    font-size: 1.2rem;
                    opacity: 0.8;
                    text-shadow: 0 0 10px rgba(249, 203, 153, 0.8);
                  }

                  .map-plane-1 {
                    top: 30%;
                    left: -40px;
                    animation: mapFlyAcross1 15s infinite linear;
                  }

                  .map-plane-2 {
                    top: 60%;
                    right: -40px;
                    animation: mapFlyAcross2 18s infinite linear;
                    animation-delay: 6s;
                  }

                  .map-plane-3 {
                    top: 45%;
                    left: -40px;
                    animation: mapFlyAcross3 20s infinite linear;
                    animation-delay: 12s;
                  }

                  @keyframes mapFlyAcross1 {
                    0% { left: -40px; transform: rotate(15deg); }
                    100% { left: calc(100% + 40px); transform: rotate(15deg); }
                  }

                  @keyframes mapFlyAcross2 {
                    0% { right: -40px; transform: rotate(195deg); }
                    100% { right: calc(100% + 40px); transform: rotate(195deg); }
                  }

                  @keyframes mapFlyAcross3 {
                    0% { left: -40px; transform: rotate(25deg); }
                    100% { left: calc(100% + 40px); transform: rotate(25deg); }
                  }





                  /* Egypt highlight */
                  .egypt-highlight {
                    position: absolute;
                    left: 46%;
                    top: 50%;
                    width: 12px;
                    height: 12px;
                    background: #90EE90;
                    border: 2px solid #32CD32;
                    border-radius: 50%;
                    transform: translate(-50%, -50%);
                    box-shadow: 0 0 15px rgba(144, 238, 144, 0.8);
                    animation: egyptPulse 3s infinite;
                    z-index: 1001;
                  }

                  @keyframes egyptPulse {
                    0%, 100% {
                      transform: translate(-50%, -50%) scale(1);
                      box-shadow: 0 0 15px rgba(144, 238, 144, 0.8);
                    }
                    50% {
                      transform: translate(-50%, -50%) scale(1.2);
                      box-shadow: 0 0 25px rgba(144, 238, 144, 1);
                    }
                  }
                </style>
                <div class="coverage-map card border-0 shadow-lg p-4 glass-effect" style="position: relative;">
                  <div id="coverageMap" style="height: 360px; width:100%; position: relative;"></div>

                  <!-- START_MAP_ANIMATIONS (reversible: say "تراجع" to remove) -->
                  <div class="map-export-animations" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 1000; pointer-events: none;">
                    <!-- Flying Planes like in About section -->
                    <div class="map-plane map-plane-1">
                      <i class="fas fa-plane"></i>
                    </div>
                    <div class="map-plane map-plane-2">
                      <i class="fas fa-plane"></i>
                    </div>
                    <div class="map-plane map-plane-3">
                      <i class="fas fa-plane"></i>
                    </div>
                  </div>
                  <!-- END_MAP_ANIMATIONS -->
                  <div class="map-legend badge bg-gradient-secondary text-dark px-3 py-2 rounded-pill position-absolute end-0 bottom-0 m-3 fs-6 fw-semibold">
                    {% if session.get('language') == 'ar' %} تغطية خريطتنا {% else %} {{ _('Map Coverage') }} {% endif %}
                  </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Why Choose Us Section -->
<section class="py-5 bg-gradient-light position-relative overflow-hidden">
    <!-- Background Elements -->
    <div class="position-absolute top-0 start-0 w-100 h-100">
        <div class="pattern-dots opacity-25"></div>
    </div>

    <div class="container position-relative">
        <div class="text-center mb-5" data-aos="fade-up">
            <div class="section-badge badge bg-gradient-primary text-white px-4 py-2 rounded-pill mb-3 fs-6 fw-semibold">
                <i class="fas fa-star me-2"></i>{{ _('Why Choose Us') }}
            </div>
            <h2 class="section-heading english-heading gradient-text">{{ _('Your Trusted Export Partner') }}</h2>
            <p class="lead english-text text-muted col-lg-8 mx-auto">
                {{ _('Experience the difference of working with Egypt\'s premier agricultural export company,') }}
                {{ _('where quality meets reliability and tradition meets innovation.') }}
            </p>
        </div>

        <div class="row g-4">
            <div class="col-lg-3 col-md-6" data-aos="fade-up" data-aos-delay="100">
                <div class="feature-card card h-100 border-0 shadow-lg text-center p-4 hover-lift">
                    <div class="feature-icon-wrapper mb-4">
                        <div class="feature-icon bg-gradient-primary text-white rounded-circle d-inline-flex align-items-center justify-content-center position-relative" style="width: 100px; height: 100px;">
                            <i class="fas fa-award fa-3x"></i>
                            <div class="icon-glow position-absolute top-0 start-0 w-100 h-100 rounded-circle"></div>
                        </div>
                    </div>

                    <h5 class="card-heading english-heading mb-3">{{ _('Premium Quality') }}</h5>
                    <p class="text-muted english-text mb-4">
                        {{ _('Rigorous quality control processes and international certifications ensure') }}
                        {{ _('every product meets the highest global standards.') }}
                    </p>

                    <div class="feature-highlights">
                        <div class="highlight-item d-flex align-items-center justify-content-center mb-2">
                            <i class="fas fa-check-circle text-success me-2"></i>
                            <small class="text-muted">{{ _('ISO 22000 Certified') }}</small>
                        </div>
                        <div class="highlight-item d-flex align-items-center justify-content-center">
                            <i class="fas fa-check-circle text-success me-2"></i>
                            <small class="text-muted">
                                {% if session.get('language') == 'ar' %}
                                    معايير الممارسات الزراعية الجيدة
                                {% else %}
                                    GlobalG.A.P. Standards
                                {% endif %}
                            </small>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-lg-3 col-md-6" data-aos="fade-up" data-aos-delay="200">
                <div class="feature-card card h-100 border-0 shadow-lg text-center p-4 hover-lift">
                    <div class="feature-icon-wrapper mb-4">
                        <div class="feature-icon bg-gradient-secondary text-white rounded-circle d-inline-flex align-items-center justify-content-center position-relative" style="width: 100px; height: 100px;">
                            <i class="fas fa-shipping-fast fa-3x"></i>
                            <div class="icon-glow position-absolute top-0 start-0 w-100 h-100 rounded-circle"></div>
                        </div>
                    </div>

                    <h5 class="card-heading english-heading mb-3">{{ _('Reliable Logistics') }}</h5>
                    <p class="text-muted english-text mb-4">
                        {{ _('Advanced cold chain management ensures your products') }}
                        {{ _('arrive fresh and on time, anywhere in the world.') }}
                    </p>

                    <div class="feature-highlights">
                        <div class="highlight-item d-flex align-items-center justify-content-center mb-2">
                            <i class="fas fa-check-circle text-success me-2"></i>
                            <small class="text-muted english-text">{{ _('Cold Chain Excellence') }}</small>
                        </div>
                        <div class="highlight-item d-flex align-items-center justify-content-center">
                            <i class="fas fa-check-circle text-success me-2"></i>
                            <small class="text-muted english-text">{{ _('Global Network') }}</small>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-lg-3 col-md-6" data-aos="fade-up" data-aos-delay="300">
                <div class="feature-card card h-100 border-0 shadow-lg text-center p-4 hover-lift">
                    <div class="feature-icon-wrapper mb-4">
                        <div class="feature-icon bg-gradient-primary text-white rounded-circle d-inline-flex align-items-center justify-content-center position-relative" style="width: 100px; height: 100px;">
                            <i class="fas fa-globe fa-3x"></i>
                            <div class="icon-glow position-absolute top-0 start-0 w-100 h-100 rounded-circle"></div>
                        </div>
                    </div>

                    <h5 class="card-heading english-heading mb-3">{{ _('Global Reach') }}</h5>
                    <p class="text-muted mb-4">
                        {{ _('Serving 50+ countries worldwide with trusted partnerships') }}
                        {{ _('and comprehensive market knowledge.') }}
                    </p>

                    <div class="feature-highlights">
                        <div class="highlight-item d-flex align-items-center justify-content-center mb-2">
                            <i class="fas fa-check-circle text-success me-2"></i>
                            <small class="text-muted">{{ _('50+ Countries') }}</small>
                        </div>
                        <div class="highlight-item d-flex align-items-center justify-content-center">
                            <i class="fas fa-check-circle text-success me-2"></i>
                            <small class="text-muted">{{ _('Trusted Partners') }}</small>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-lg-3 col-md-6" data-aos="fade-up" data-aos-delay="400">
                <div class="feature-card card h-100 border-0 shadow-lg text-center p-4 hover-lift">
                    <div class="feature-icon-wrapper mb-4">
                        <div class="feature-icon bg-gradient-secondary text-white rounded-circle d-inline-flex align-items-center justify-content-center position-relative" style="width: 100px; height: 100px;">
                            <i class="fas fa-handshake fa-3x"></i>
                            <div class="icon-glow position-absolute top-0 start-0 w-100 h-100 rounded-circle"></div>
                        </div>
                    </div>

                    <h5 class="card-heading english-heading mb-3">{{ _('Trusted Partnership') }}</h5>
                    <p class="text-muted mb-4">
                        {{ _('Over 25 years of experience building lasting relationships') }}
                        {{ _('with clients through integrity and excellence.') }}
                    </p>

                    <div class="feature-highlights">
                        <div class="highlight-item d-flex align-items-center justify-content-center mb-2">
                            <i class="fas fa-check-circle text-success me-2"></i>
                            <small class="text-muted">{{ _('25+ Years Experience') }}</small>
                        </div>
                        <div class="highlight-item d-flex align-items-center justify-content-center">
                            <i class="fas fa-check-circle text-success me-2"></i>
                            <small class="text-muted">{{ _('500+ Clients') }}</small>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Latest News Section -->
<section class="py-5 position-relative overflow-hidden">
        <!-- Scoped fix: improve Read More contrast on hover in news cards -->
        <style>
          .news-card .btn-outline-primary:hover,
          .news-card .btn-outline-primary:focus,
          .news-card .btn-outline-primary:active,
          .news-card .btn-outline-primary:focus-visible {
            background: #f9cb99 !important;
            border-color: #f9cb99 !important;
            color: #103d24 !important; /* dark text for contrast */
          }
          .news-card .btn-outline-primary:hover i,
          .news-card .btn-outline-primary:focus i,
          .news-card .btn-outline-primary:active i,
          .news-card .btn-outline-primary:focus-visible i {
            color: inherit !important;
          }
        </style>

        <!-- Enhanced hover effects for category and product buttons -->
        <style>
          /* Apply same hover effect to category and product buttons */
          .category-card .btn-outline-primary:hover,
          .category-card .btn-outline-primary:focus,
          .category-card .btn-outline-primary:active,
          .category-card .btn-outline-primary:focus-visible,
          .product-card .btn-outline-primary:hover,
          .product-card .btn-outline-primary:focus,
          .product-card .btn-outline-primary:active,
          .product-card .btn-outline-primary:focus-visible {
            background: #f9cb99 !important;
            border-color: #f9cb99 !important;
            color: #103d24 !important; /* dark text for contrast */
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(249, 203, 153, 0.4);
          }
          .category-card .btn-outline-primary:hover i,
          .category-card .btn-outline-primary:focus i,
          .category-card .btn-outline-primary:active i,
          .category-card .btn-outline-primary:focus-visible i,
          .product-card .btn-outline-primary:hover i,
          .product-card .btn-outline-primary:focus i,
          .product-card .btn-outline-primary:active i,
          .product-card .btn-outline-primary:focus-visible i {
            color: #103d24 !important; /* dark icon for contrast */
          }
        </style>

    <!-- Background Elements -->

        <!-- START_NEWS_BG_ICONS (reversible: say "تراجع" to remove) -->
        <style>
          .news-bg-icons { position:absolute; inset:0; z-index:0; pointer-events:none; }
          .news-bg-icon { position:absolute; color:#f9cb99; opacity:.35; filter: drop-shadow(0 2px 6px rgba(0,0,0,.15)); }
          .news-bg-icon svg { width:40px; height:40px; display:block; fill:currentColor; }
          @keyframes newsFloatY { 0%{ transform: translateY(0);} 50%{ transform: translateY(-10px);} 100%{ transform: translateY(0);} }
          @keyframes newsDriftX { 0%{ transform: translateX(0);} 50%{ transform: translateX(8px);} 100%{ transform: translateX(0);} }
          .nf-1 { animation: newsFloatY 7s ease-in-out infinite; }
          .nf-2 { animation: newsDriftX 8s ease-in-out infinite; }
          .nf-3 { animation: newsFloatY 9s ease-in-out infinite; }
          @media (max-width:576px){ .news-bg-icon svg { width:28px; height:28px; } }
        </style>
        <div class="news-bg-icons" aria-hidden="true">
          <!-- Newspaper -->
          <span class="news-bg-icon nf-1" style="top:12%; left:10%;">
            <svg viewBox="0 0 24 24"><path d="M3 4h14a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V4zm2 2v12h12V6H5zm2 2h8v3H7V8zm0 5h5v3H7v-3z"/></svg>
          </span>
          <!-- Bell (updates) -->
          <span class="news-bg-icon nf-2" style="top:28%; right:12%; opacity:.4;">
            <svg viewBox="0 0 24 24"><path d="M12 2a6 6 0 00-6 6v3.8L4 14v2h16v-2l-2-2.2V8a6 6 0 00-6-6zm0 20a3 3 0 003-3H9a3 3 0 003 3z"/></svg>
          </span>
          <!-- Tag (news tag) -->
          <span class="news-bg-icon nf-3" style="bottom:18%; left:16%; opacity:.4;">
            <svg viewBox="0 0 24 24"><path d="M20 10l-8-8H4v8l8 8 8-8zM7 7A2 2 0 117 3a2 2 0 010 4z"/></svg>
          </span>
          <!-- Clock (time) -->
          <span class="news-bg-icon nf-2" style="bottom:12%; right:16%;">
            <svg viewBox="0 0 24 24"><path d="M12 2a10 10 0 100 20 10 10 0 000-20zm.75 5h-1.5v5.2l4.5 2.6.75-1.3-3.75-2.1V7z"/></svg>
          </span>
          <!-- Megaphone (announcements) -->
          <span class="news-bg-icon nf-1" style="top:42%; left:22%; opacity:.45;">
            <svg viewBox="0 0 24 24"><path d="M3 10v4l8 3V7l-8 3zm10-3v10l6 2V5l-6 2zM5 15l2 5h3l-1.2-4.2L5 15z"/></svg>
          </span>
          <!-- Comment bubble (updates) -->
          <span class="news-bg-icon nf-3" style="bottom:22%; right:26%; opacity:.4;">
            <svg viewBox="0 0 24 24"><path d="M21 6a3 3 0 00-3-3H6a3 3 0 00-3 3v9a3 3 0 003 3h9l4 4v-4h-1a3 3 0 003-3V6z"/></svg>
          </span>

        </div>
        <!-- END_NEWS_BG_ICONS -->

    <div class="position-absolute top-0 end-0 w-50 h-100">
        <div class="bg-gradient-secondary opacity-10" style="clip-path: polygon(30% 0, 100% 0, 100% 100%, 0 100%);"></div>
    </div>

    <div class="container position-relative">
        <div class="text-center mb-5" data-aos="fade-up">
            <div class="section-badge badge bg-gradient-secondary text-dark px-4 py-2 rounded-pill mb-3 fs-6 fw-semibold">
                <i class="fas fa-newspaper me-2"></i>{{ _('Latest Updates') }}
            </div>
            <h2 class="section-heading english-heading gradient-text">{{ _('News & Industry Insights') }}</h2>
            <p class="lead text-muted col-lg-8 mx-auto">
                {{ _('Stay informed about our latest developments, industry trends, and insights') }}
                {{ _('from the world of Egyptian agricultural exports.') }}
            </p>
        </div>

        <div class="row g-4">
            {% if latest_news and latest_news|length > 0 %}
                {% for article in latest_news %}
                <div class="col-lg-4" data-aos="fade-up" data-aos-delay="{{ loop.index0 * 100 }}">
                    <article class="news-card card h-100 border-0 shadow-lg hover-lift position-relative overflow-hidden">
                        <!-- News Image -->
                        <div class="news-image-wrapper position-relative overflow-hidden">
                            {% if article.cover_image %}
                            <img src="{{ url_for('main.uploaded_file', filename='news/' + article.cover_image) }}"
                                 class="card-img-top news-image" alt="{{ article.get_title(current_language) }}" style="height: 250px; object-fit: cover;">
                            {% else %}
                            <div class="card-img-top bg-gradient-primary d-flex align-items-center justify-content-center" style="height: 250px;">
                                <i class="fas fa-newspaper fa-4x text-white opacity-75"></i>
                            </div>
                            {% endif %}

                            <!-- Date Badge -->
                            <div class="position-absolute top-0 start-0 p-3">
                                <div class="date-badge bg-white text-dark rounded-pill px-3 py-2 shadow-sm">
                                    <i class="fas fa-calendar-alt me-2 text-primary-custom"></i>
                                    <small class="fw-semibold">{{ article.publish_at.strftime('%b %d') }}</small>
                                </div>
                            </div>
                        </div>

                        <!-- News Content -->
                        <div class="card-body p-4">
                            <div class="news-meta mb-3">
                                <span class="badge bg-light text-primary-custom fw-semibold">
                                    <i class="fas fa-tag me-1"></i>{{ _('News') }}
                                </span>
                                {% if article.featured %}
                                <span class="badge bg-gradient-secondary text-dark fw-semibold ms-2">
                                    <i class="fas fa-star me-1"></i>{{ _('Featured') }}
                                </span>
                                {% endif %}
                            </div>

                            <h5 class="card-heading english-heading mb-3">{{ article.get_title(current_language) }}</h5>
                            <p class="card-text text-muted mb-4">
                                {{ article.get_excerpt(current_language) | truncate(120) if article.get_excerpt(current_language) else _('Stay updated with the latest news and developments from Emdad Global.') }}
                            </p>

                            {% if article.tags %}
                            <div class="mb-3">
                                {% for tag in article.get_tags_list()[:3] %}
                                    <span class="badge bg-light text-primary me-1">#{{ tag }}</span>
                                {% endfor %}
                            </div>
                            {% endif %}

                            <!-- Article Footer -->
                            <div class="d-flex justify-content-between align-items-center mt-auto">
                                <small class="text-muted">
                                    <i class="fas fa-clock me-1"></i>{{ article.publish_at.strftime('%B %d, %Y') }}
                                </small>
                                <a href="{{ url_for('main.news_detail', slug=article.slug) }}" class="btn btn-outline-success btn-sm hover-lift">
                                    <i class="fas fa-arrow-right me-1"></i>{{ _('Read More') }}
                                </a>
                            </div>
                        </div>
                    </article>
                </div>
                {% endfor %}
            {% else %}
                <!-- Default News Items -->
                {% set default_news = [
                    {'title': _('Expanding Global Reach'), 'excerpt': _('Emdad Global announces new partnerships in European and Asian markets, strengthening our international presence.')},
                    {'title': _('Quality Certification Update'), 'excerpt': _('Successfully renewed ISO 22000 and Good Agricultural Practices certifications, reinforcing our commitment to quality standards.')},
                    {'title': _('Sustainable Agriculture Initiative'), 'excerpt': _('Launching new sustainable farming practices to support environmental conservation and premium product quality.')}
                ] %}

                {% for article in default_news %}
                <div class="col-lg-4 col-md-6 col-sm-12" data-aos="fade-up" data-aos-delay="{{ loop.index0 * 100 }}">
                    <article class="news-card card h-100 border-0 shadow-lg hover-lift position-relative overflow-hidden">
                        <div class="card-img-top bg-gradient-primary d-flex align-items-center justify-content-center" style="height: 250px;">
                            <i class="fas fa-newspaper fa-4x text-white opacity-75"></i>
                        </div>

                        <div class="position-absolute top-0 start-0 p-3">
                            <div class="date-badge bg-white text-dark rounded-pill px-3 py-2 shadow-sm">
                                <i class="fas fa-calendar-alt me-2 text-primary-custom"></i>
                                <small class="fw-semibold">Jan {{ 15 - loop.index0 * 5 }}</small>
                            </div>
                        </div>

                        <div class="card-body p-4">
                            <div class="news-meta mb-3">
                                <span class="badge bg-light text-primary-custom fw-semibold">
                                    <i class="fas fa-tag me-1"></i>{{ _('News') }}
                                </span>
                            </div>

                            <h5 class="card-title fw-bold mb-3">{{ article.title }}</h5>
                            <p class="card-text text-muted mb-4">{{ article.excerpt }}</p>

                            <div class="d-flex justify-content-between align-items-center mt-auto">
                                <small class="text-muted">
                                    <i class="fas fa-clock me-1"></i>January {{ 15 - loop.index0 * 5 }}, 2025
                                </small>
                                <a href="{{ url_for('main.news') }}" class="btn btn-outline-success btn-sm hover-lift">
                                    <i class="fas fa-arrow-right me-1"></i>{{ _('Read More') }}
                                </a>
                            </div>
                        </div>
                    </article>
                </div>
                {% endfor %}
            {% endif %}
        </div>

        <!-- View All News Button -->
        <div class="text-center mt-5" data-aos="fade-up" data-aos-delay="400">
            <a href="{{ url_for('main.news') }}" class="btn btn-primary btn-lg px-5 py-3 hover-lift">
                <i class="fas fa-newspaper me-2"></i>{{ _('View All News') }}
            </a>
        </div>
    </div>
</section>

<!-- CTA Section -->
<section class="py-5 bg-gradient-primary text-white position-relative overflow-hidden">
    <!-- Background Pattern -->
    <div class="position-absolute top-0 start-0 w-100 h-100">
        <div class="cta-pattern opacity-10"></div>
    </div>
    <!-- START_CTA_AGRI_ICONS (reversible: say "تراجع" to remove) -->
    <style>
      /* Scoped decorative animated agri icons for Partnership Opportunity section */
      .cta-agri-icons { position: absolute; inset: 0; pointer-events: none; z-index: 0; }
      .cta-agri-icon { position: absolute; opacity: 0.6; color: #f9cb99; filter: drop-shadow(0 2px 6px rgba(0,0,0,0.2)); }
      .cta-agri-icon svg { width: 28px; height: 28px; display: block; fill: currentColor; }
      .cta-agri-icon.icon-green { color: #689b8a; opacity: 0.55; }
      .cta-agri-icon.icon-white { color: #ffffff; opacity: 0.35; }
      @keyframes floatY { 0%{ transform: translateY(0);} 50%{ transform: translateY(-12px);} 100%{ transform: translateY(0);} }
      @keyframes driftX { 0%{ transform: translateX(0);} 50%{ transform: translateX(10px);} 100%{ transform: translateX(0);} }
      @keyframes spinSlow { 0%{ transform: rotate(0deg);} 100%{ transform: rotate(360deg);} }
      .float-1 { animation: floatY 6s ease-in-out infinite; }
      .float-2 { animation: driftX 7s ease-in-out infinite; }
      .float-3 { animation: floatY 8s ease-in-out infinite; }
      .spin-slow { animation: spinSlow 24s linear infinite; transform-origin: center; }
      @media (max-width: 576px){ .cta-agri-icon svg { width: 22px; height: 22px; } }
    </style>
    <div class="cta-agri-icons" aria-hidden="true">
      <!-- Leaf -->
      <span class="cta-agri-icon float-1" style="top: 12%; left: 8%;">
        <svg viewBox="0 0 24 24"><path d="M12 2c-2 0-3 2-3 2s-1-2-3-2-3 2-3 4c0 4 6 8 6 8s6-4 6-8c0-2-1-4-3-4z"/></svg>
      </span>
      <!-- Seedling -->
      <span class="cta-agri-icon icon-green float-2" style="top: 28%; right: 10%;">
        <svg viewBox="0 0 24 24"><path d="M12 13c-3-5-7-6-10-4 2 3 5 5 10 6v7h2v-7c5-1 8-3 10-6-3-2-7-1-10 4z"/></svg>
      </span>
      <!-- Wheat/Blade -->
      <span class="cta-agri-icon icon-white float-3" style="bottom: 18%; left: 12%;">
        <svg viewBox="0 0 24 24"><path d="M11 2c-2 3-2 6 0 9s2 6 0 9h2c-2-3-2-6 0-9s2-6 0-9h-2z"/></svg>
      </span>
      <!-- Fruit circle -->
      <span class="cta-agri-icon spin-slow" style="top: 20%; left: 45%; opacity: .4;">
        <svg viewBox="0 0 24 24"><path d="M12 4a8 8 0 100 16 8 8 0 000-16z"/></svg>
      </span>
      <!-- Lemon shape -->
      <span class="cta-agri-icon icon-green float-1" style="bottom: 14%; right: 16%;">
        <svg viewBox="0 0 24 24"><path d="M4 12c4-6 12-6 16 0-4 6-12 6-16 0z"/></svg>
      </span>
      <!-- Small leafs -->
      <span class="cta-agri-icon float-2" style="top: 8%; right: 28%; opacity:.45;">
        <svg viewBox="0 0 24 24"><path d="M7 12c3-7 7-7 10 0-3 7-7 7-10 0z"/></svg>
      </span>
      <span class="cta-agri-icon icon-white float-3" style="bottom: 26%; left: 32%; opacity:.3;">
        <svg viewBox="0 0 24 24"><path d="M12 2C7 6 4 10 4 14s3 8 8 8 8-4 8-8-3-8-8-12z"/></svg>
      </span>
      <!-- Grain cluster -->
      <span class="cta-agri-icon float-2" style="top: 36%; left: 18%;">
        <svg viewBox="0 0 24 24"><path d="M8 5a3 3 0 116 0 3 3 0 01-6 0zm-2 6a3 3 0 116 0 3 3 0 01-6 0zm6 0a3 3 0 116 0 3 3 0 01-6 0zm-2 6a3 3 0 116 0 3 3 0 01-6 0z"/></svg>
      </span>
    </div>
    <!-- END_CTA_AGRI_ICONS -->



    <!-- Floating Elements -->
    <div class="floating-shapes">
        <div class="cta-shape cta-shape-1"></div>
        <div class="cta-shape cta-shape-2"></div>
        <div class="cta-shape cta-shape-3"></div>
    </div>

    <div class="container position-relative">
        <div class="row align-items-center">
            <div class="col-lg-8" data-aos="fade-right">
                <div class="cta-content">
                    <div class="cta-badge badge bg-gradient-secondary text-dark px-4 py-2 rounded-pill mb-3 fs-6 fw-semibold">
                        <i class="fas fa-handshake me-2"></i>{{ _('Partnership Opportunity') }}
                    </div>

                    {% if session.get('language') == 'ar' %}
                    <h2 class="section-heading arabic-heading text-shadow" style="color: #ffffff;">هل انت مستعد للتعاون معنا؟</h2>
                    {% else %}
                    <h2 class="section-heading english-heading text-shadow" style="color: #ffffff;">
                        {{ _('Ready to Start Your') }}
                        <span style="color: #f9cb99;">{{ _('Premium') }}</span>
                        {{ _('Agricultural Order?') }}
                    </h2>
                    {% endif %}

                    <p class="lead mb-4 text-shadow-sm">
                        {{ _('Join hundreds of satisfied clients worldwide who trust Emdad Global for their') }}
                        {{ _('agricultural sourcing needs. Get a personalized quote today and experience the difference.') }}
                    </p>

                    <!-- Trust Indicators -->
                    <div class="cta-features row g-3 mb-4">
                        <!-- Replaced trust indicators with progress bars; say "تراجع" to restore -->
                        <div class="col-12">
                            <div class="mb-2 d-flex align-items-center justify-content-between small fw-semibold" style="color:#ffffff;">
                                <span>{{ _('Quick Response') }}</span>
                                <span class="progress-value" data-target="100">0%</span>
                            </div>
                            <div class="progress" style="height: 10px; background: rgba(255,255,255,0.15);">
                                <div class="progress-bar" role="progressbar" data-target="100" style="width: 0%; background: #f9cb99;" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
                            </div>
                        </div>
                        <div class="col-12 mt-3">
                            <div class="mb-2 d-flex align-items-center justify-content-between small fw-semibold" style="color:#ffffff;">
                                <span>{{ _('Quality Guaranteed') }}</span>
                                <span class="progress-value" data-target="100">0%</span>
                            </div>
                            <div class="progress" style="height: 10px; background: rgba(255,255,255,0.15);">
                                <div class="progress-bar" role="progressbar" data-target="100" style="width: 0%; background: #f9cb99;" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
                            </div>
                        </div>
                        <!-- ORIGINAL_TRUST_INDICATORS (kept for quick revert)
                        <div class="col-md-6">
                            <div class="feature-item d-flex align-items-center">
                                <div class="feature-icon bg-gradient-secondary text-dark rounded-circle d-flex align-items-center justify-content-center me-3" style="width: 50px; height: 50px;">
                                    <i class="fas fa-clock fs-6"></i>
                                </div>
                                <div>
                                    <h6 class="mb-1 fw-bold" style="color: #ffffff;">{{ _('Quick Response') }}</h6>
                                    <small class="opacity-75">{{ _('24-hour quote turnaround') }}</small>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="feature-item d-flex align-items-center">
                                <div class="feature-icon bg-gradient-secondary text-dark rounded-circle d-flex align-items-center justify-content-center me-3" style="width: 50px; height: 50px;">
                                    <i class="fas fa-shield-alt fs-6"></i>
                                </div>
                                <div>
                                    <h6 class="mb-1 fw-bold" style="color: #ffffff;">{{ _('Quality Guaranteed') }}</h6>
                                    <small class="opacity-75">{{ _('International certifications') }}</small>
                                </div>
                            </div>
                        </div>
                        -->
                    </div>

                        <script>
                        (function(){
                          const container = document.querySelector('.cta-features');
                          if (!container) return;
                          let animated = false;
                          const animate = () => {
                            if (animated) return; animated = true;
                            const bars = container.querySelectorAll('.progress-bar');
                            const values = container.querySelectorAll('.progress-value');
                            bars.forEach((bar, i) => {
                              const target = parseInt(bar.getAttribute('data-target') || '100', 10);
                              let current = 0;
                              const duration = 1200;
                              const start = performance.now();
                              function step(ts){
                                const progress = Math.min((ts - start) / duration, 1);
                                current = Math.floor(progress * target);
                                bar.style.width = current + '%';
                                bar.setAttribute('aria-valuenow', String(current));
                                if (values[i]) values[i].textContent = current + '%';
                                if (progress < 1) requestAnimationFrame(step);
                                else {
                                  bar.style.width = target + '%';
                                  bar.setAttribute('aria-valuenow', String(target));
                                  if (values[i]) values[i].textContent = target + '%';
                                }
                              }
                              requestAnimationFrame(step);
                            });
                          };
                          if ('IntersectionObserver' in window) {
                            const io = new IntersectionObserver(entries => {
                              entries.forEach(entry => { if (entry.isIntersecting) { animate(); io.disconnect(); } });
                            }, { threshold: 0.3 });
                            io.observe(container);
                          } else {
                            window.addEventListener('load', animate);
                            setTimeout(animate, 800);
                          }
                        })();
                        </script>

                </div>
            </div>

            <div class="col-lg-4 text-lg-center" data-aos="fade-left" data-aos-delay="200">
                <div class="cta-actions">
                    <!-- Primary CTA -->
                    <a href="{{ url_for('main.contact') }}" class="btn btn-secondary btn-lg px-5 py-3 mb-3 d-block hover-lift">
                        <span class="me-2 d-inline-flex align-items-center" aria-hidden="true" style="line-height:0;">
                            <svg viewBox="0 0 24 24" width="18" height="18" role="img" aria-hidden="true" style="display:block;fill:currentColor;"><path d="M20.5 7.5h-6.25l-1.6-2.4a2 2 0 00-1.66-.9H3.5A2.5 2.5 0 001 6.7v10.8A2.5 2.5 0 003.5 20h17a2.5 2.5 0 002.5-2.5v-7a3 3 0 00-2.5-3zm-8.5 0h-1l-.8-1.2c-.09-.14-.24-.3-.45-.3H3.5a.5.5 0 00-.5.5v.5h9.5zM3 8.5h17.5c.83 0 1.5.67 1.5 1.5v7c0 .55-.45 1-1 1H3.5c-.28 0-.5-.22-.5-.5v-9zM6 13.5h5c.28 0 .5.22.5.5s-.22.5-.5.5H6a.5.5 0 010-1zm0 2h9c.28 0 .5.22.5.5s-.22.5-.5.5H6a.5.5 0 010-1z"/></svg>
                        </span>{{ _('Request a Quote') }}
                    </a>

                    <!-- Secondary CTA -->
                    <a href="{{ url_for('main.products') }}" class="btn btn-outline-light btn-lg px-5 py-3 d-block hover-lift">
                        <i class="fas fa-leaf me-2"></i>{{ _('Browse Products') }}
                    </a>

                    <!-- Contact Info -->
                    <div class="contact-info mt-4 p-3 glass-effect rounded-3">
                        <a href="tel:{{ COMPANY_PHONE }}" class="btn btn-outline-light btn-lg px-5 py-3 d-block hover-lift mb-3" style="border: 2px solid white; color: white; font-weight: 600; backdrop-filter: blur(10px); background: rgba(255, 255, 255, 0.1);">
                            <span class="me-2 d-inline-flex align-items-center" aria-hidden="true" style="color: #f9cb99; line-height:0;">
                                <svg viewBox="0 0 24 24" width="18" height="18" role="img" aria-hidden="true" style="display:block;fill:currentColor;"><path d="M6.62 10.79a15.05 15.05 0 006.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.57 3.57.57.55 0 1 .45 1 1V21c0 .55-.45 1-1 1C10.07 22 2 13.93 2 3c0-.55.45-1 1-1h3.5c.55 0 1 .45 1 1 0 1.24.2 2.45.57 3.57.11.35.03.74-.24 1.02l-2.2 2.2z"/></svg>
                            </span>
                            <span class="fw-semibold" style="color:#ffffff;">{{ COMPANY_PHONE or '+20-xxx-xxx-xxxx' }}</span>
                        </a>
                        <a href="mailto:{{ COMPANY_EMAIL }}" class="btn btn-outline-light btn-lg px-5 py-3 d-block hover-lift" style="border: 2px solid white; color: white; font-weight: 600; backdrop-filter: blur(10px); background: rgba(255, 255, 255, 0.1);">
                            <span class="me-2 d-inline-flex align-items-center" aria-hidden="true" style="color: #f9cb99; line-height:0;">
                                <svg viewBox="0 0 24 24" width="18" height="18" role="img" aria-hidden="true" style="display:block;fill:currentColor;"><path d="M2 5h20v14H2V5zm10 7L3.5 7h17L12 12z"/></svg>
                            </span>
                            <span class="fw-semibold" style="color:#ffffff;">{{ COMPANY_EMAIL or 'info@emdadglobal.com' }}</span>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
{% endblock %}

{% block extra_scripts %}
<script>
document.addEventListener('DOMContentLoaded', function() {
    // Initialize enhanced animations
    initHomePageAnimations();
    initCounterAnimations();
    initScrollAnimations();
    initFontLoading();
});

function initFontLoading() {
    // Add font loading class
    document.body.classList.add('fonts-loading');

    // Check if fonts are loaded
    if (document.fonts && document.fonts.ready) {
        document.fonts.ready.then(function() {
            document.body.classList.remove('fonts-loading');
            document.body.classList.add('fonts-loaded');
        });
    } else {
        // Fallback for older browsers
        setTimeout(function() {
            document.body.classList.remove('fonts-loading');
            document.body.classList.add('fonts-loaded');
        }, 3000);
    }

    // Preload critical fonts
    const fontPreloads = [
        'https://fonts.googleapis.com/css2?family=Nunito:wght@800;900&display=swap',
        'https://fonts.googleapis.com/css2?family=Amiri:wght@700&display=swap'
    ];

    fontPreloads.forEach(fontUrl => {
        const link = document.createElement('link');
        link.rel = 'preload';
        link.as = 'style';
        link.href = fontUrl;
        document.head.appendChild(link);

        // Convert to stylesheet after loading
        link.onload = function() {
            this.rel = 'stylesheet';
        };
    });
}

function initHomePageAnimations() {
    // Enhanced card hover effects
    const cards = document.querySelectorAll('.category-card, .product-card, .feature-card, .news-card');
    cards.forEach((card, index) => {
        // Stagger initial animation
        card.style.animationDelay = `${index * 0.1}s`;

        card.addEventListener('mouseenter', function() {
            this.style.transform = 'translateY(-15px) scale(1.02)';
            this.style.boxShadow = '0 25px 50px rgba(46, 125, 50, 0.2)';
            this.style.transition = 'all 0.3s cubic-bezier(0.4, 0, 0.2, 1)';
        });

        card.addEventListener('mouseleave', function() {
            this.style.transform = 'translateY(0) scale(1)';
            this.style.boxShadow = '';
        });
    });

    // Floating animation for achievement cards
    const floatingCards = document.querySelectorAll('.achievement-card');
    floatingCards.forEach((card, index) => {
        card.style.animationDelay = `${index * 0.5}s`;
        card.classList.add('float');
    });

    // Agricultural icons interactive effects
    const agriculturalIcons = document.querySelectorAll('.agricultural-icon');
    agriculturalIcons.forEach((icon, index) => {
        // Add click effect
        icon.addEventListener('click', function() {
            this.style.animation = 'none';
            this.style.transform = 'scale(1.5) rotate(360deg)';
            this.style.transition = 'all 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55)';

            setTimeout(() => {
                this.style.animation = '';
                this.style.transform = '';
                this.style.transition = '';
            }, 600);
        });

        // Add tooltip effect
        icon.addEventListener('mouseenter', function() {
            const tooltip = document.createElement('div');
            tooltip.className = 'agricultural-tooltip';
            tooltip.textContent = this.getAttribute('title');
            tooltip.style.cssText = `
                position: absolute;
                background: rgba(0, 0, 0, 0.9);
                color: white;
                padding: 0.5rem 1rem;
                border-radius: 0.5rem;
                font-size: 0.875rem;
                font-weight: 600;
                white-space: nowrap;
                z-index: 1000;
                pointer-events: none;
                transform: translateX(-50%) translateY(-120%);
                left: 50%;
                top: 0;
                opacity: 0;
                transition: opacity 0.3s ease;
                box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
            `;

            this.style.position = 'relative';
            this.appendChild(tooltip);

            setTimeout(() => {
                tooltip.style.opacity = '1';
            }, 100);
        });

        icon.addEventListener('mouseleave', function() {
            const tooltip = this.querySelector('.agricultural-tooltip');
            if (tooltip) {
                tooltip.style.opacity = '0';
                setTimeout(() => {
                    if (tooltip.parentNode) {
                        tooltip.parentNode.removeChild(tooltip);
                    }
                }, 300);
            }
        });
    });

    // Quality indicators hover effects
    const qualityIndicators = document.querySelectorAll('.quality-indicator');
    qualityIndicators.forEach((indicator, index) => {
        indicator.addEventListener('mouseenter', function() {
            this.style.transform = 'translateY(-5px) scale(1.05)';
            this.style.background = 'rgba(255, 255, 255, 0.25)';
            this.style.boxShadow = '0 8px 25px rgba(0, 0, 0, 0.2)';
        });

        indicator.addEventListener('mouseleave', function() {
            this.style.transform = '';
            this.style.background = '';
            this.style.boxShadow = '';
        });
    });
}

function initCounterAnimations() {
    // Enhanced counter animation
    const counters = document.querySelectorAll('.stat-number[data-count]');

    const animateCounter = (counter) => {
        const target = parseInt(counter.dataset.count);
        const duration = 2500;
        const start = performance.now();

        const animate = (currentTime) => {
            const elapsed = currentTime - start;
            const progress = Math.min(elapsed / duration, 1);

            // Easing function (ease-out-cubic)
            const easeOutCubic = 1 - Math.pow(1 - progress, 3);
            const current = Math.floor(target * easeOutCubic);

            counter.textContent = current + '+';

            if (progress < 1) {
                requestAnimationFrame(animate);
            } else {
                counter.textContent = target + '+';
                // Add completion animation
                counter.style.transform = 'scale(1.1)';
                setTimeout(() => {
                    counter.style.transform = 'scale(1)';
                }, 200);
            }
        };

        requestAnimationFrame(animate);
    };

    // Intersection Observer for counters
    const counterObserver = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                animateCounter(entry.target);
                counterObserver.unobserve(entry.target);
            }
        });
    }, { threshold: 0.5 });

    counters.forEach(counter => counterObserver.observe(counter));
}

function initScrollAnimations() {
    // Enhanced scroll-triggered animations
    const observerOptions = {
        threshold: 0.1,
        rootMargin: '0px 0px -50px 0px'
    };

    const scrollObserver = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                entry.target.classList.add('animate-in');

                // Add specific animations based on element type
                if (entry.target.classList.contains('feature-card')) {
                    entry.target.style.animation = 'fadeInUp 0.8s ease-out forwards';
                }

                if (entry.target.classList.contains('product-card')) {
                    entry.target.style.animation = 'scaleIn 0.6s ease-out forwards';
                }

                if (entry.target.classList.contains('news-card')) {
                    entry.target.style.animation = 'fadeInLeft 0.8s ease-out forwards';
                }

                scrollObserver.unobserve(entry.target);
            }
        });
    }, observerOptions);

    // Observe elements
    document.querySelectorAll('.feature-card, .product-card, .news-card, .stat-card').forEach(el => {
        scrollObserver.observe(el);
    });

    // Parallax effect for background elements
    let ticking = false;

    function updateParallax() {
        const scrolled = window.pageYOffset;
        const shapes = document.querySelectorAll('.shape, .cta-shape');

        shapes.forEach((shape, index) => {
            const speed = 0.5 + (index * 0.1);
            const yPos = -(scrolled * speed);
            shape.style.transform = `translateY(${yPos}px)`;
        });

        ticking = false;
    }

    window.addEventListener('scroll', () => {
        if (!ticking) {
            requestAnimationFrame(updateParallax);
            ticking = true;
        }
    });
}

// Add custom styles for animations
const style = document.createElement('style');
style.textContent = `
    .animate-in {
        opacity: 1 !important;
        transform: translateY(0) !important;
    }

    .float {
        animation: float 4s ease-in-out infinite;
    }
`;
document.head.appendChild(style);
</script>

<script src="https://cdn.jsdelivr.net/npm/jsvectormap@latest/dist/js/jsvectormap.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/jsvectormap@latest/dist/maps/world.js"></script>
<script>
  // Initialize interactive vector map for coverage
  function initCoverageMap(){
    var el = document.getElementById('coverageMap');
    if(!el) return;

    var map = new jsVectorMap({
      selector: '#coverageMap',
      map: 'world',
      backgroundColor: 'transparent',
      zoomButtons: true,
      zoomOnScroll: false,
      regionStyle: {
        initial: { fill: '#e8efeccc', stroke: 'rgba(0,0,0,0.05)' },
        hover: { cursor: 'pointer', stroke: 'rgba(0,0,0,0.15)' },
        selected: { fill: '#f9cb99' }
      },

      selectedRegions: ['US','AU','CA','GB','DE','SE','RU','LY','IQ','MA','BR','AE','SA'],
      onRegionTooltipShow: function(tooltip, code){
        var names = map.getRegionName(code);
        tooltip.text(names);
      }
    });

    // Ensure base selected regions remain selected regardless of hover/zoom
    var BASE_SELECTED = ['US','AU','CA','GB','DE','SE','RU','LY','IQ','MA','BR','AE','SA'];
    function reapplyBaseSelection(){
      var current = map.getSelectedRegions() || [];
      var merged = Array.from(new Set([].concat(current, BASE_SELECTED)));
      map.setSelectedRegions(merged);
    }
    // Re-apply after interactions
    map.on('regionSelected', function(){ reapplyBaseSelection(); });
    map.on('regionTooltipShow', function(){ reapplyBaseSelection(); });
    map.on('zoom', function(){ reapplyBaseSelection(); });

    // Initial enforce
    reapplyBaseSelection();

    // Color Egypt in light green
    setTimeout(function() {
      var egyptElement = document.querySelector('[data-code="EG"]');
      if (egyptElement) {
        egyptElement.style.fill = '#90EE90';
      }
    }, 100);

  }

  // Hook into existing DOMContentLoaded init
  document.addEventListener('DOMContentLoaded', initCoverageMap);
</script>

{% endblock %}
